# 步骤5：分析交互逻辑提示词（通用版）

> **📌 使用场景**：基于页面元素分析，定义页面间的交互流程和元素的行为逻辑

---

## 🎭 R - 角色定义

你是一位资深交互设计师，拥有10年Web和移动端交互设计经验，擅长：

- 用户交互流程设计，理解用户操作路径和任务流
- 状态机建模，清晰定义页面和元素的状态转换
- 交互反馈设计，优化用户操作的即时反馈
- 异常流程处理，设计友好的错误提示和恢复机制
- 动效设计原则，提升用户体验的流畅性

---

## 📋 T - 任务描述

基于页面元素分析结果，定义**页面间的导航流程**和**元素的交互行为**。

### 输入材料

#### 材料1：页面元素分析结果

```
【请粘贴步骤4生成的"页面元素分析"文档内容】

包括：
- 页面列表
- 每个页面的元素清单
- 表单字段定义
- 按钮和交互元素
```

#### 材料2：用户故事（参考）

```
【请粘贴对应的用户故事内容，用于理解业务流程】

重点关注：
- 验收标准（Given-When-Then）
- 正常流程和异常流程
```

### 任务上下文

- **分析目的**：为原型设计提供完整的交互规范
- **详细程度**：需详细到每个按钮点击后的行为
- **设计原则**：清晰、一致、可预测

---

## 🎯 G - 目标与意图

### 核心目标

定义完整的用户交互流程，包括页面间导航、元素状态变化、用户反馈机制，确保交互逻辑清晰可实现。

### 具体目标

1. **流程完整性**：覆盖正常流程、异常流程、边界情况的所有交互路径
2. **状态明确性**：定义每个页面和元素的状态及状态转换条件
3. **反馈及时性**：明确每个用户操作的即时反馈（成功/失败/加载中）
4. **可实现性**：交互设计符合前端技术能力，避免过度复杂

### 业务价值

- **为UI设计师**：提供交互规范，确保设计一致性
- **为前端开发**：明确交互逻辑，减少开发疑问
- **为测试团队**：提供交互测试用例的编写依据
- **为产品经理**：验证用户体验是否符合预期

### 成功标准

- ✅ 页面流转图覆盖所有用户操作路径
- ✅ 每个交互元素都有明确的触发条件和执行结果
- ✅ 异常情况有清晰的提示和恢复路径
- ✅ 交互逻辑与验收标准一致

---

## 📤 O - 输出要求

### 1. 输出结构

```markdown
# {Story名称} - 交互逻辑设计

## Story概述

- **Story ID**: US-{序号}
- **Story名称**: {Story名称}
- **相关页面**: {页面列表}

---

## 第1部分：页面流转图

### 1.1 主流程（正常流程）

{使用文本流程图或Mermaid语法描述页面间的跳转}

```mermaid
graph TD
    A[{起始页面}] -->|{触发条件}| B[{目标页面}]
    B -->|{触发条件}| C[{下一页面}]
    C -->|{触发条件}| D[{结束页面}]
```

或使用文本描述：

```
1. {页面1} → {操作/条件} → {页面2}
2. {页面2} → {操作/条件} → {页面3}
3. {页面3} → {操作/条件} → {页面4}（结束）
```

---

### 1.2 异常流程

{描述异常情况的页面跳转}

```
1. {页面1} → {异常条件：如验证失败} → {错误提示}（停留在当前页）
2. {页面2} → {异常条件：如网络超时} → {错误提示页面}
3. {任意页面} → {用户取消操作} → {上一页面/首页}
```

---

### 1.3 流程说明

| 流程步骤 | 页面       | 用户操作   | 系统响应   | 下一步        |
| -------- | ---------- | ---------- | ---------- | ------------- |
| 1        | {页面名称} | {操作描述} | {系统响应} | {跳转到页面X} |
| 2        | {页面名称} | {操作描述} | {系统响应} | {跳转到页面Y} |
| ...      | ...        | ...        | ...        | ...           |

---

## 第2部分：交互元素行为定义

{为每个页面定义交互元素的行为}

### P1:

#### 2.1 表单交互

##### 字段：（元素ID: F1）

**交互行为**：

| 事件     | 触发条件                 | 执行动作               | 反馈效果            |
| -------- | ------------------------ | ---------------------- | ------------------- |
| 获得焦点 | 用户点击输入框           | 显示输入提示文本       | 边框高亮            |
| 失去焦点 | 用户点击其他位置         | 执行字段验证           | 显示验证结果        |
| 输入中   | 用户输入字符             | 实时字符计数（如适用） | 显示剩余字符数      |
| 验证失败 | 失去焦点且数据不符合规则 | 显示错误提示           | 红色边框 + 错误文本 |
| 验证成功 | 失去焦点且数据符合规则   | 清除错误提示           | 绿色对勾（可选）    |

**验证规则**：

- {验证规则1}
- {验证规则2}

**错误提示文本**：

- 规则1违反："<错误提示>"
- 规则2违反："<错误提示>"

---

##### 字段：（元素ID: F2）

{同上格式}

---

#### 2.2 按钮交互

##### 按钮：（元素ID: BTN1）

**交互行为**：

| 事件 | 触发条件     | 执行动作                                          | 反馈效果                                                        |
| ---- | ------------ | ------------------------------------------------- | --------------------------------------------------------------- |
| 点击 | 用户点击按钮 | 1. 表单验证`<br>`2. 提交数据`<br>`3. 页面跳转 | 1. 按钮变为加载状态`<br>`2. 显示加载动画`<br>`3. 成功后跳转 |
| 悬停 | 鼠标悬停     | 无                                                | 背景色变深                                                      |
| 禁用 | 表单验证失败 | 无法点击                                          | 灰色显示 + 禁用光标                                             |

**点击后逻辑**：

```
1. 前端验证：
   - 验证所有必填字段
   - 验证字段格式
   - 如果验证失败：显示错误提示，停止提交

2. 提交数据：
   - 按钮变为加载状态（文本变为"提交中..."，显示加载图标）
   - 调用API：POST /api/{endpoint}
   - 请求体：{ field1: value1, field2: value2, ... }

3. 处理响应：
   - 成功（200）：
     - 显示成功提示："提交成功"
     - 等待1秒
     - 跳转到{目标页面}
   
   - 失败（4xx/5xx）：
     - 显示错误提示："{错误信息}"
     - 按钮恢复正常状态
     - 停留在当前页面
   
   - 超时（无响应）：
     - 显示超时提示："网络超时，请重试"
     - 按钮恢复正常状态
```

---

##### 按钮：（元素ID: BTN2）

{同上格式}

---

#### 2.3 其他交互元素

##### 元素：（元素ID: I1）

{定义该元素的交互行为}

---

### P2:

{继续定义其他页面的交互行为}

---

## 第3部分：状态管理

### 3.1 页面状态

{定义每个页面的状态}

| 状态   | 触发条件     | 显示内容                | 可执行操作         |
| ------ | ------------ | ----------------------- | ------------------ |
| 初始化 | 页面首次加载 | 显示加载动画            | 无                 |
| 就绪   | 数据加载完成 | 显示表单/内容           | 填写表单、点击按钮 |
| 提交中 | 用户提交表单 | 按钮加载状态 + 禁用表单 | 无（等待响应）     |
| 成功   | API返回成功  | 成功提示                | 自动跳转           |
| 失败   | API返回失败  | 错误提示                | 重试提交           |

---

### 3.2 元素状态

{定义关键元素的状态}

#### （如：提交按钮）

| 状态   | 触发条件     | 外观                   | 是否可点击 |
| ------ | ------------ | ---------------------- | ---------- |
| 默认   | 页面加载完成 | 正常颜色               | 是         |
| 悬停   | 鼠标悬停     | 颜色变深               | 是         |
| 禁用   | 表单验证失败 | 灰色 + 禁用光标        | 否         |
| 加载中 | 数据提交中   | 加载图标 + "提交中..." | 否         |

---

## 第4部分：反馈机制

### 4.1 成功反馈

| 场景         | 反馈方式              | 反馈内容            | 持续时间  | 后续动作         |
| ------------ | --------------------- | ------------------- | --------- | ---------------- |
| 表单提交成功 | Toast提示（页面顶部） | "提交成功"          | 2秒       | 自动跳转到{页面} |
| 数据保存成功 | 行内提示              | 绿色对勾 + "已保存" | 3秒后消失 | 无               |
| ...          | ...                   | ...                 | ...       | ...              |

---

### 4.2 错误反馈

| 场景         | 反馈方式              | 反馈内容               | 持续时间     | 后续动作           |
| ------------ | --------------------- | ---------------------- | ------------ | ------------------ |
| 字段验证失败 | 字段下方红色文本      | "{具体错误原因}"       | 直到用户修正 | 用户修改后重新验证 |
| 网络请求失败 | Toast提示（页面顶部） | "提交失败，请重试"     | 5秒          | 用户手动重试       |
| 权限不足     | 弹窗提示              | "您没有权限执行此操作" | 用户关闭     | 跳转到登录页       |
| ...          | ...                   | ...                    | ...          | ...                |

---

### 4.3 加载反馈

| 场景         | 反馈方式      | 显示内容               |
| ------------ | ------------- | ---------------------- |
| 页面首次加载 | 全屏骨架屏    | 内容占位符             |
| 数据提交中   | 按钮加载状态  | 加载图标 + "提交中..." |
| 数据查询中   | 表格/列表加载 | 加载动画               |

---

## 第5部分：动效设计（可选）

{如有特殊动效需求，描述动效效果}

| 元素       | 动效类型 | 触发时机 | 动效参数        |
| ---------- | -------- | -------- | --------------- |
| {元素名称} | 淡入淡出 | 页面加载 | 持续时间300ms   |
| {元素名称} | 滑入     | 弹窗打开 | 从上往下，200ms |
| ...        | ...      | ...      | ...             |

---

## 附录：交互设计原则

### 一致性原则

- 相同操作使用相同的交互方式
- 相同反馈使用相同的提示样式

### 可预测性原则

- 按钮文本明确说明点击后的行为
- 链接文本明确说明跳转目标

### 容错性原则

- 提供明确的错误提示
- 支持用户撤销或返回操作

### 反馈及时性原则

- 用户操作后立即提供反馈（<100ms）
- 长时间操作显示进度指示

```

---

### 2. 质量要求

#### 流程完整性（强制）

- 必须覆盖正常流程、异常流程、边界情况
- 每个页面必须有明确的进入和退出路径
- 异常情况必须有恢复路径

#### 交互明确性（强制）

- 每个按钮点击后的行为必须详细描述
- 表单验证规则和错误提示必须明确
- 页面状态转换条件必须清晰

#### 可实现性（强制）

- 交互设计符合HTML5和现代前端框架能力
- 避免过度复杂的动效和交互
- API调用和数据流转合理

---

### 3. 格式规范

- **文档格式**: Markdown
- **流程图**: 使用Mermaid语法或文本描述
- **表格**: 用于结构化交互行为定义
- **代码块**: 用于复杂逻辑描述

---

### 4. 特别说明

#### 状态管理建议

- **页面级状态**: 加载中、就绪、提交中、成功、失败
- **元素级状态**: 默认、悬停、激活、禁用、加载中

#### 错误提示原则

- **具体性**: 不要说"输入有误"，要说"手机号格式错误"
- **指导性**: 告诉用户如何修正，如"请输入11位数字"
- **友好性**: 使用平和的语气，避免指责用户

#### API调用约定

- **超时时间**: 建议15-30秒
- **重试机制**: 自动重试1-2次，然后提示用户手动重试
- **降级方案**: 如果接口失败，是否有备用方案

---

### 5. 输出格式

直接输出完整的交互逻辑设计文档，按照上述结构组织。

**注意**：不要有任何前言、说明或总结性文字，直接输出交互逻辑设计文档。

---

## ✨ 使用说明

### 如何使用此提示词

1. **准备输入材料**
   - 页面元素分析结果（从步骤4获取）
   - 用户故事内容（参考验收标准）

2. **复制提示词**
   - 从"你是一位资深交互设计师"开始

3. **粘贴到AI工具**
   - 将提示词和输入材料一起提交

4. **生成交互逻辑设计**
   - AI将生成完整的交互规范

5. **人工审核和优化**
   - 验证流程是否覆盖所有场景
   - 检查交互行为是否符合用户习惯
   - 补充遗漏的异常处理
   - 优化反馈提示文案

6. **与团队确认**
   - 与UI设计师确认交互流程合理性
   - 与前端开发确认技术可行性
   - 与产品经理确认用户体验

7. **保存文档**
   - 保存到`outputs/05-{Story-ID}-交互逻辑设计.md`

### 预期生成时间

- AI生成：5-8分钟
- 人工审核优化：30-40分钟
- 团队确认：20-30分钟

### 下一步操作

交互逻辑设计确认后：
1. 进入步骤6：生成HTML原型

---

**📌 重要提醒**：
- 交互逻辑是原型开发的核心依据，必须详细和准确
- 重点关注异常流程和错误处理，这是用户体验的关键
- 与验收标准对照，确保交互逻辑覆盖所有Scenario
- 考虑移动端和PC端的交互差异（如适用）
```
