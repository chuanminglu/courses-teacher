# 02-SAD文档生成提示词

## 💡 使用说明

本提示词用于根据架构分析报告，生成符合IEEE 1016-2009标准的软件架构设计文档（Software Architecture Document, SAD）。请将【】中的占位符替换为你的实际项目信息。

---

## 📋 完整提示词（复制以下内容到AI工具）

```
---

## 🎭 R - 角色定义

你是一位资深软件架构师，拥有15年大型系统架构设计经验，擅长：

- IEEE 1016-2009架构文档标准编写
- 4+1视图架构设计（逻辑视图、开发视图、过程视图、物理视图、场景视图）
- 分布式系统架构设计与技术选型
- 架构风险评估与应对策略制定
- 架构决策记录（ADR）与文档化

---

## 📋 T - 任务描述

基于已完成的架构分析报告，生成一份符合IEEE 1016-2009标准的软件架构设计文档（SAD）。

### 输入材料

#### 材料1：架构分析报告

【在此粘贴步骤01生成的架构分析报告完整内容】

### 任务上下文

- 本任务是架构设计工作流的第二步，将架构分析结果转化为标准化的设计文档
- SAD文档需覆盖10个核心章节，符合IEEE 1016-2009标准
- 文档需为后续详细设计（逻辑视图、类图、时序图、组件图）提供总体指导
- 所有设计决策需可追溯到架构分析报告

---

## 🎯 G - 目标与意图

### 核心目标

生成一份标准化、结构完整、可落地的软件架构设计文档，确保架构设计可追溯、可评审、可实施。

### 具体目标

1. **标准合规性**: 严格遵循IEEE 1016-2009标准，覆盖10个核心章节，确保文档专业性和通用性
2. **设计完整性**: 基于4+1视图模型，清晰定义逻辑架构、部署架构、数据架构、安全架构、集成架构
3. **决策可追溯性**: 所有架构决策追溯到架构分析报告，标注来源章节，确保设计有据可依
4. **实施可指导性**: 提供详细的技术栈选型、接口规范、数据模型、部署方案，支撑后续开发实施

### 业务价值

- **为架构师**: 提供标准化设计框架，确保架构设计覆盖所有关键维度，降低遗漏风险
- **为开发团队**: 明确技术选型、接口规范、数据模型，减少理解偏差和返工成本
- **为测试团队**: 提供架构视图和质量属性设计，支撑非功能测试用例设计
- **为运维团队**: 明确部署架构、监控策略、容灾方案，支持运维规划和实施
- **为项目经理**: 提供架构评审依据，识别技术风险，支持项目计划和资源分配

### 成功标准

- ✅ 文档包含IEEE 1016-2009标准要求的10个核心章节
- ✅ 所有架构决策可追溯到架构分析报告（100%覆盖）
- ✅ 技术栈选型有明确的选择理由和备选方案
- ✅ 架构图使用Mermaid绘制，清晰展示组件关系和数据流
- ✅ 非功能需求有具体的架构实现方案（性能、安全、可用性等）
- ✅ 文档通过架构评审（无P0级别问题）

---

## 📤 O - 输出要求

### 1. 输出结构（IEEE 1016-2009标准10章节）

#### 第1章：引言

**1.1 文档目的**
- 说明本SAD文档的用途和目标读者

**1.2 项目背景**
- 【项目名称】
- 【业务背景】
- （来自架构分析报告§1）

**1.3 文档范围**
- 说明文档覆盖的系统边界和架构层次

**1.4 术语表**
- 列出文档中使用的专业术语和缩写
- 格式：术语 | 英文全称 | 中文解释

**1.5 参考文档**
- 架构分析报告
- 需求规格说明书
- 相关技术标准

---

#### 第2章：系统概述

**2.1 系统目标**
- （来自架构分析报告§2 业务目标）

**2.2 系统边界**
- （来自架构分析报告§3.1 系统边界分析）
- 使用Mermaid C4 Context图展示系统与外部系统的交互

**2.3 核心功能**
- （来自架构分析报告§2 核心功能）

**2.4 关键约束**
- 技术约束：【从架构分析报告提取】
- 业务约束：【从架构分析报告提取】
- 合规约束：【从架构分析报告提取】

---

#### 第3章：架构目标与原则

**3.1 架构目标**
- （来自架构分析报告§4 架构关注点）
- 示例：高性能、高可用、可扩展、安全合规

**3.2 架构原则**
- 分层解耦原则
- 领域驱动设计原则
- 云原生架构原则
- 安全零信任原则
- （根据项目特点定义3-5条核心原则）

**3.3 质量属性优先级**
- 使用表格展示质量属性的优先级排序
- 格式：质量属性 | 优先级（P0/P1/P2）| 量化目标 | 架构策略

---

#### 第4章：逻辑架构设计

**4.1 架构风格选择**
- （来自架构分析报告§5 推荐架构风格）
- 说明选择理由和权衡分析

**4.2 分层架构**
- 定义系统分层结构（如：接入层、应用层、领域层、基础设施层）
- 使用Mermaid分层架构图展示

**4.3 领域模型**
- （来自架构分析报告§3.2 领域驱动设计分析）
- 核心域、支撑域、通用域划分
- 限界上下文定义

**4.4 核心组件**
- 列出系统核心组件及职责
- 格式：组件名称 | 职责描述 | 依赖关系

---

#### 第5章：部署架构设计

**5.1 部署拓扑**
- 使用Mermaid Deployment图展示服务器、容器、网络拓扑
- 标注可用区、网络分区、负载均衡

**5.2 技术栈选型**
- （来自架构分析报告§5 技术栈推荐）
- 格式：技术类别 | 选型方案 | 版本 | 选择理由 | 备选方案

**5.3 运行环境**
- 开发环境
- 测试环境
- 生产环境
- 环境配置差异说明

**5.4 容量规划**
- 服务器资源配置（CPU、内存、存储）
- 网络带宽需求
- 并发用户数估算
- （来自架构分析报告§6 非功能需求）

---

#### 第6章：数据架构设计

**6.1 数据模型**
- 核心实体及关系
- 使用Mermaid ER图展示

**6.2 数据库设计**
- 数据库类型选择（关系型/NoSQL/时序数据库）
- 分库分表策略（如适用）
- 数据一致性策略

**6.3 数据流设计**
- 使用Mermaid流程图展示数据流转路径
- 标注数据存储点、转换点、同步点

**6.4 数据安全**
- 数据加密策略（传输加密、存储加密）
- 敏感数据脱敏规则
- 数据备份与恢复策略

---

#### 第7章：接口架构设计

**7.1 内部接口**
- 服务间通信协议（REST/gRPC/消息队列）
- 接口规范（路径命名、参数格式、错误码）

**7.2 外部接口**
- 第三方系统集成接口
- API网关设计
- 接口鉴权与限流策略

**7.3 接口清单**
- 格式：接口名称 | 类型 | 协议 | 提供方 | 消费方 | SLA要求

---

#### 第8章：安全架构设计

**8.1 认证与授权**
- （来自架构分析报告§6 安全需求）
- 身份认证方案（OAuth2.0/SAML/JWT）
- 权限模型（RBAC/ABAC）

**8.2 网络安全**
- 网络隔离策略
- 防火墙规则
- DDoS防护

**8.3 数据安全**
- （来自第6章§6.4）

**8.4 审计与合规**
- 操作审计日志
- 合规标准映射（如等保三级）
- （来自架构分析报告§6 合规需求）

---

#### 第9章：非功能架构设计

**9.1 性能设计**
- （来自架构分析报告§6 性能需求）
- 缓存策略（Redis/本地缓存）
- 异步处理策略（消息队列）
- 数据库优化策略（索引、分区、读写分离）

**9.2 可用性设计**
- 高可用架构（主备/集群）
- 故障检测与自动切换
- 降级与熔断策略

**9.3 可扩展性设计**
- 水平扩展策略
- 弹性伸缩策略
- 微服务拆分原则

**9.4 可观测性设计**
- 日志收集（ELK/Loki）
- 监控指标（Prometheus/Grafana）
- 链路追踪（Jaeger/Zipkin）
- （来自架构分析报告§6 可观测性需求）

---

#### 第10章：架构决策与风险

**10.1 关键架构决策**
- 使用ADR格式记录3-5个关键决策
- 格式：决策编号 | 决策内容 | 背景 | 理由 | 影响 | 风险

**10.2 技术风险评估**
- （来自架构分析报告§7 技术挑战与风险）
- 格式：风险描述 | 影响程度 | 发生概率 | 缓解措施 | 应急方案

**10.3 架构演进路线**
- 第一阶段：MVP核心功能（月份）
- 第二阶段：功能增强（月份）
- 第三阶段：性能优化与扩展（月份）

---

### 2. 质量要求

#### 可追溯性（强制）
- 所有架构决策必须追溯到架构分析报告
- 引用格式：`（来自架构分析报告§X.X 章节名称）`
- 如果是补充内容，标注：`（基于{标准/最佳实践}补充）`

#### 量化表达（强制）
- 避免"高性能""高可用"等模糊表达
- 使用具体指标：
  - 性能：QPS≥10000、延迟P95<100ms
  - 可用性：SLA≥99.9%、MTTR<30分钟
  - 容量：支持100万DAU、存储1TB数据

#### 图表规范（强制）
- 所有架构图使用Mermaid语法
- 图表类型：
  - 系统边界：C4 Context图
  - 分层架构：graph TD
  - 部署架构：graph LR（标注服务器、容器）
  - 数据模型：erDiagram
  - 数据流：flowchart TD
- 每个图表必须有标题和说明

#### 一致性（强制）
- 技术栈选型必须与架构分析报告一致
- 非功能需求量化指标必须与架构分析报告一致
- 如有调整，必须在文档中说明调整理由

---

### 3. 格式规范

- **文档格式**: Markdown
- **标题层级**: 使用##（第1章）、###（1.1节）、####（1.1.1小节）
- **表格**: 用于结构化信息（技术栈、接口清单、风险矩阵）
- **代码块**: Mermaid图表使用\`\`\`mermaid代码块
- **Emoji**: 增强可读性
  - ✅ 优势/通过
  - ⚠️ 风险/注意
  - ❌ 劣势/不通过
  - 📋 清单
  - 🔧 工具
  - 📊 数据/指标
  - 🔒 安全

---

### 4. 特别说明

#### 技术栈选型原则
- 优先选择团队熟悉的技术
- 考虑技术成熟度和社区活跃度
- 评估学习成本和运维成本
- 提供至少1个备选方案

#### 架构图绘制要点
- 图表简洁清晰，避免过度复杂
- 使用统一的命名规范
- 标注关键的数据流和调用关系
- 必要时提供图表说明文字

#### 风险应对策略
- 每个P0/P1风险必须有具体缓解措施
- 缓解措施必须可执行（不能是"加强管理"等空话）
- 提供风险触发条件和应急预案

#### 信息不足的处理
如果架构分析报告中缺少某些信息，你应该：
1. **合理推断**: 基于行业最佳实践补充
2. **明确标注**: `（基于{标准/实践}补充，需与团队确认）`
3. **列入待办**: 在文档末尾标注`【待补充】{内容描述}`

---

### 5. 输出格式

直接输出完整的SAD文档，不要有任何前言或解释。文档以"# 软件架构设计文档（SAD）"开头。

---
```

---

## 📌 示例：访客管理系统的输入材料

假设你要为"访客管理系统"生成SAD文档，输入材料应该是：

### 输入材料示例

```
#### 材料1：架构分析报告

（这里粘贴步骤01生成的完整架构分析报告，包含：
- §1 项目概述
- §2 业务需求分析
- §3 系统边界与领域分析
- §4 架构关注点
- §5 推荐架构风格
- §6 非功能需求分解
- §7 技术挑战与风险
）
```

生成的SAD文档会包含10个章节，每个架构决策都会标注来源，如：

```
**8.1 认证与授权**

本系统采用JWT+OAuth2.0的混合认证方案：

- **内部员工**: 使用企业AD域账号，通过OAuth2.0单点登录（来自架构分析报告§6.2 安全需求）
- **访客**: 使用手机号+短信验证码，登录后颁发JWT Token（来自架构分析报告§2.1 核心功能）
- **Token有效期**: 访客Token 2小时，员工Token 8小时（基于最小权限原则补充）

...
```
