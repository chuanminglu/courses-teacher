# 07-架构评审提示词

## 💡 使用说明

本提示词用于根据前面生成的所有架构设计文档，生成架构评审清单（Architecture Review Checklist），帮助评审团队系统化评审架构设计质量。请将【】中的占位符替换为你的实际项目信息。

---

## 📋 完整提示词（复制以下内容到AI工具）

```
---

## 🎭 R - 角色定义

你是一位资深架构评审专家，拥有15年大型系统架构评审经验，擅长：

- 架构质量属性评估（ISO 25010质量模型）
- 架构风险识别与缓解策略制定
- 架构决策合理性评审（ADR评审）
- 架构合规性审查（安全、性能、可用性标准）
- 架构评审流程设计与评审会议主持

---

## 📋 T - 任务描述

基于已完成的架构设计文档（SAD、逻辑视图、类图、时序图、组件图），生成一份全面的架构评审清单（Checklist），覆盖架构的完整性、合理性、可行性、风险可控性等多个维度。

### 输入材料

#### 材料1：软件架构设计文档（SAD）

【在此粘贴步骤02生成的SAD文档完整内容】

#### 材料2：逻辑视图设计文档

【在此粘贴步骤03生成的逻辑视图文档】

#### 材料3：类图设计文档

【在此粘贴步骤04生成的类图文档】

#### 材料4：时序图设计文档

【在此粘贴步骤05生成的时序图文档】

#### 材料5：组件图设计文档

【在此粘贴步骤06生成的组件图文档】

### 任务上下文

- 本任务是架构设计工作流的最后一步，对所有架构设计文档进行全面评审
- 评审清单需覆盖架构的多个质量维度（完整性、一致性、可行性、风险）
- 评审结果需明确指出P0/P1/P2级别的问题和改进建议
- 评审清单需支持评审会议的高效执行

---

## 🎯 G - 目标与意图

### 核心目标

生成结构化、可操作、全面的架构评审清单，确保架构设计质量满足项目需求，降低技术风险。

### 具体目标

1. **评审维度全面性**: 覆盖架构的10大评审维度（完整性、一致性、可追溯性、可行性、性能、安全、可用性、可扩展性、可维护性、合规性）
2. **问题可判定性**: 每个检查项可明确判定为✅通过、⚠️需改进、❌不通过
3. **问题可执行性**: 识别的问题有明确的改进建议和优先级（P0/P1/P2）
4. **评审可追溯性**: 每个检查项可追溯到具体的架构文档章节

### 业务价值

- **为评审委员会**: 提供结构化评审框架，提高评审效率和评审质量
- **为架构师**: 识别架构设计的薄弱环节，明确改进方向
- **为项目经理**: 评估架构风险，支持项目决策（是否通过评审、是否需要返工）
- **为开发团队**: 理解架构设计的关键要求，避免实施偏差

### 成功标准

- ✅ 评审清单覆盖10大评审维度，每个维度3-10个检查项
- ✅ 所有检查项可追溯到架构文档具体章节
- ✅ 识别的问题有明确的优先级和改进建议
- ✅ 评审结果有明确的通过/不通过标准
- ✅ 评审清单支持评审会议的高效执行（2小时内完成）

---

## 📤 O - 输出要求

### 1. 输出结构

#### 第0部分：评审元信息

**0.1 评审信息**
- 项目名称：【项目名称】
- 评审日期：【YYYY-MM-DD】
- 评审人：【评审委员会成员】
- 架构师：【架构负责人】
- 评审版本：【架构文档版本号】

**0.2 评审文档清单**
- [ ] 软件架构设计文档（SAD）
- [ ] 逻辑视图设计文档
- [ ] 类图设计文档
- [ ] 时序图设计文档
- [ ] 组件图设计文档
- [ ] 架构分析报告（如有）
- [ ] 非功能需求清单（如有）

**0.3 评审流程说明**

**评审前准备**（1周前）：
1. 架构师提交所有架构文档
2. 评审委员会成员预审文档
3. 填写评审清单（初步评分）

**评审会议**（2小时）：
1. 架构师介绍架构设计（30分钟）
2. 评审委员会逐项评审（60分钟）
3. 汇总问题，确定优先级（20分钟）
4. 评审决策：通过/有条件通过/不通过（10分钟）

**评审后跟进**（1-2周）：
1. 架构师针对P0/P1问题进行整改
2. 更新架构文档
3. 复审（如需要）

**0.4 评审标准**

**通过标准**：
- ✅ 无P0级别问题
- ✅ P1级别问题≤3个
- ✅ 所有强制检查项通过

**有条件通过**：
- ⚠️ 无P0级别问题
- ⚠️ P1级别问题4-10个
- ⚠️ 需在2周内整改P1问题并复审

**不通过**：
- ❌ 存在P0级别问题
- ❌ P1级别问题>10个
- ❌ 需架构重新设计

---

#### 第1部分：完整性评审

**1.1 文档完整性**

| 检查项 | 检查标准 | 评审结果 | 问题描述 | 优先级 | 参考文档 |
|-------|---------|---------|---------|--------|---------|
| SAD文档包含10个章节 | 覆盖IEEE 1016-2009标准要求的10个章节 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD目录 |
| 逻辑视图覆盖所有限界上下文 | 每个限界上下文有完整的领域模型设计 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | 逻辑视图§2 |
| 类图覆盖所有聚合根 | 每个聚合根有完整的属性和方法设计 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 类图§2 |
| 时序图覆盖核心业务场景 | 至少3个核心场景有时序图 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 时序图§2 |
| 组件图覆盖所有部署单元 | 所有微服务/模块有组件设计 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | 组件图§3 |
| 架构图使用Mermaid绘制 | 所有架构图使用Mermaid语法，可渲染 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P2 | 所有文档 |
| 术语表完整 | 关键业务术语和技术术语有定义 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P2 | SAD §1.4 |

**1.2 需求覆盖完整性**

| 检查项 | 检查标准 | 评审结果 | 问题描述 | 优先级 | 参考文档 |
|-------|---------|---------|---------|--------|---------|
| 核心功能需求覆盖 | SAD覆盖所有核心功能需求 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §2.3 |
| 非功能需求覆盖 | SAD覆盖性能/安全/可用性/可扩展性需求 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §9 |
| 合规需求覆盖 | SAD覆盖等保/GDPR等合规要求 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §8.4 |
| 技术约束覆盖 | SAD覆盖所有技术约束（语言/框架/云平台） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §2.4 |

---

#### 第2部分：一致性评审

**2.1 跨文档一致性**

| 检查项 | 检查标准 | 评审结果 | 问题描述 | 优先级 | 参考文档 |
|-------|---------|---------|---------|--------|---------|
| 组件名称一致 | SAD、逻辑视图、组件图中的组件名称一致 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 所有文档 |
| 接口定义一致 | 组件图中的接口与时序图中的消息一致 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 组件图§4、时序图§2 |
| 技术栈一致 | SAD技术栈选型与组件图技术实现一致 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §5.2、组件图§3 |
| 数据模型一致 | SAD数据模型与类图实体设计一致 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §6、类图§2 |
| 非功能需求一致 | SAD非功能需求量化指标在组件图中有实现方案 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §9、组件图 |

**2.2 内部一致性**

| 检查项 | 检查标准 | 评审结果 | 问题描述 | 优先级 | 参考文档 |
|-------|---------|---------|---------|--------|---------|
| 类图与时序图一致 | 时序图中的对象和消息在类图中有定义 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 类图、时序图 |
| 分层依赖一致 | 所有文档遵循分层依赖原则（单向依赖） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | 所有文档 |
| 限界上下文一致 | 逻辑视图、类图、组件图中的限界上下文一致 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 逻辑视图、类图、组件图 |

---

#### 第3部分：可追溯性评审

**3.1 设计可追溯性**

| 检查项 | 检查标准 | 评审结果 | 问题描述 | 优先级 | 参考文档 |
|-------|---------|---------|---------|--------|---------|
| SAD追溯到需求 | SAD中的设计决策标注了来源（需求/标准） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD所有章节 |
| 逻辑视图追溯到SAD | 逻辑视图设计标注了来源（SAD章节） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P2 | 逻辑视图 |
| 类图追溯到逻辑视图 | 类图设计标注了来源（逻辑视图章节） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P2 | 类图 |
| 时序图追溯到类图 | 时序图交互标注了来源（类图方法） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P2 | 时序图 |
| 组件图追溯到SAD | 组件设计标注了来源（SAD章节） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P2 | 组件图 |

---

#### 第4部分：可行性评审

**4.1 技术可行性**

| 检查项 | 检查标准 | 评审结果 | 问题描述 | 优先级 | 参考文档 |
|-------|---------|---------|---------|--------|---------|
| 技术栈成熟度 | 选择的技术栈成熟稳定，社区活跃 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §5.2 |
| 团队技术能力 | 团队熟悉选择的技术栈，或有学习计划 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §10.2 |
| 第三方服务可用性 | 依赖的第三方服务稳定可靠，有备选方案 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §7.2 |
| 容量规划合理性 | 服务器资源配置满足业务需求 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §5.4 |
| 部署方案可行性 | 部署方案详细，支持自动化部署 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 组件图§6.4 |

**4.2 开发可行性**

| 检查项 | 检查标准 | 评审结果 | 问题描述 | 优先级 | 参考文档 |
|-------|---------|---------|---------|--------|---------|
| 组件职责清晰 | 每个组件职责单一，易于理解和实现 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 组件图§2 |
| 接口定义明确 | 接口有完整的输入/输出/错误码定义 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | 组件图§4 |
| 类设计可实现 | 类的属性和方法设计可直接映射到代码 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 类图§2 |
| 时序图可编码 | 时序图的交互流程可直接转化为代码实现 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 时序图§2 |
| 无循环依赖 | 组件间无循环依赖 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | 组件图§5.2 |

---

#### 第5部分：性能评审

**5.1 性能设计**

| 检查项 | 检查标准 | 评审结果 | 问题描述 | 优先级 | 参考文档 |
|-------|---------|---------|---------|--------|---------|
| 性能目标量化 | 性能需求有具体的量化指标（QPS/延迟/吞吐量） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §9.1 |
| 缓存策略合理 | 缓存策略明确（缓存内容/过期时间/更新策略） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §9.1 |
| 异步处理设计 | 耗时操作有异步处理方案（消息队列/异步线程） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 时序图§4 |
| 数据库优化 | 有数据库优化策略（索引/分区/读写分离） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §9.1 |
| 无性能瓶颈 | 时序图中无明显的同步阻塞点 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 时序图§2 |

---

#### 第6部分：安全评审

**6.1 安全设计**

| 检查项 | 检查标准 | 评审结果 | 问题描述 | 优先级 | 参考文档 |
|-------|---------|---------|---------|--------|---------|
| 认证方案完整 | 有明确的认证方案（OAuth2.0/JWT/SAML） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §8.1 |
| 授权模型清晰 | 有明确的权限模型（RBAC/ABAC） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §8.1 |
| 数据加密设计 | 敏感数据有加密方案（传输加密/存储加密） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §8.3 |
| 审计日志设计 | 有操作审计日志设计 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §8.4 |
| 安全编码规范 | 有防SQL注入/XSS/CSRF的设计 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §8 |
| 合规标准映射 | 合规要求有具体的实现方案 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §8.4 |

---

#### 第7部分：可用性评审

**7.1 高可用设计**

| 检查项 | 检查标准 | 评审结果 | 问题描述 | 优先级 | 参考文档 |
|-------|---------|---------|---------|--------|---------|
| 可用性目标量化 | 可用性需求有具体的SLA（如99.9%） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §9.2 |
| 高可用架构 | 有高可用架构设计（主备/集群/多活） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §9.2 |
| 故障检测机制 | 有健康检查和故障检测机制 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §9.2 |
| 降级策略 | 有服务降级和熔断策略 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §9.2 |
| 容灾方案 | 有数据备份和灾难恢复方案 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §6.4 |

---

#### 第8部分：可扩展性评审

**8.1 可扩展性设计**

| 检查项 | 检查标准 | 评审结果 | 问题描述 | 优先级 | 参考文档 |
|-------|---------|---------|---------|--------|---------|
| 水平扩展设计 | 组件支持水平扩展（无状态设计） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §9.3 |
| 弹性伸缩策略 | 有自动扩缩容策略（HPA/ASG） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 组件图§3 |
| 微服务拆分合理 | 微服务拆分粒度合理，支持独立扩展 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 组件图§3.1 |
| 数据库扩展策略 | 有数据库扩展方案（分库分表/读写分离） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §6.2 |

---

#### 第9部分：可维护性评审

**9.1 可维护性设计**

| 检查项 | 检查标准 | 评审结果 | 问题描述 | 优先级 | 参考文档 |
|-------|---------|---------|---------|--------|---------|
| 分层架构清晰 | 分层架构清晰，依赖方向单向 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | 逻辑视图§1 |
| 组件职责单一 | 每个组件职责单一（SRP原则） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 组件图§2 |
| DDD建模完整 | DDD建模完整（聚合根/值对象/领域服务） | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | 类图§2 |
| 日志收集设计 | 有日志收集和分析方案 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §9.4 |
| 监控指标设计 | 有监控指标和告警策略 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §9.4 |
| 链路追踪设计 | 有分布式链路追踪方案 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §9.4 |

---

#### 第10部分：风险评审

**10.1 技术风险**

| 检查项 | 检查标准 | 评审结果 | 问题描述 | 优先级 | 参考文档 |
|-------|---------|---------|---------|--------|---------|
| 风险识别完整 | 识别了主要的技术风险 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §10.2 |
| 风险量化评估 | 风险有影响程度和发生概率评估 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §10.2 |
| 缓解措施明确 | 每个P0/P1风险有具体的缓解措施 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P0 | SAD §10.2 |
| 应急预案完整 | 有应急预案和回滚方案 | ☐✅ ☐⚠️ ☐❌ | 【填写】 | P1 | SAD §10.2 |

---

### 2. 评审结果汇总

#### 问题统计

| 优先级 | 问题数量 | 问题分布 |
|--------|---------|---------|
| P0（致命问题） | 【N】 | 【分布在哪些维度】 |
| P1（严重问题） | 【N】 | 【分布在哪些维度】 |
| P2（一般问题） | 【N】 | 【分布在哪些维度】 |
| **总计** | 【N】 | - |

#### P0问题清单

| 问题编号 | 问题描述 | 影响 | 改进建议 | 责任人 | 截止日期 |
|---------|---------|------|---------|--------|---------|
| P0-01 | 【问题描述】 | 【影响】 | 【建议】 | 【责任人】 | 【日期】 |
| P0-02 | ... | ... | ... | ... | ... |

#### P1问题清单

| 问题编号 | 问题描述 | 影响 | 改进建议 | 责任人 | 截止日期 |
|---------|---------|------|---------|--------|---------|
| P1-01 | 【问题描述】 | 【影响】 | 【建议】 | 【责任人】 | 【日期】 |
| P1-02 | ... | ... | ... | ... | ... |

#### 评审决策

- [ ] ✅ **通过**：无P0问题，P1问题≤3个，可进入开发阶段
- [ ] ⚠️ **有条件通过**：无P0问题，P1问题4-10个，需在2周内整改并复审
- [ ] ❌ **不通过**：存在P0问题或P1问题>10个，需重新设计

**评审意见**：
【评审委员会的总体评审意见】

**签字**：
- 评审主席：____________  日期：______
- 架构师：____________  日期：______
- 技术负责人：____________  日期：______

---

### 3. 输出格式

直接输出完整的架构评审清单文档，不要有任何前言或解释。文档以"# 架构评审清单（Architecture Review Checklist）"开头。

---
```

---

## 📌 示例：访客管理系统的输入材料

假设你要为"访客管理系统"生成架构评审清单，输入材料应该是：

### 输入材料示例

```
#### 材料1：软件架构设计文档（SAD）
（这里粘贴步骤02生成的完整SAD文档）

#### 材料2：逻辑视图设计文档
（这里粘贴步骤03生成的完整逻辑视图文档）

#### 材料3：类图设计文档
（这里粘贴步骤04生成的完整类图文档）

#### 材料4：时序图设计文档
（这里粘贴步骤05生成的完整时序图文档）

#### 材料5：组件图设计文档
（这里粘贴步骤06生成的完整组件图文档）
```

生成的评审清单会包含详细的检查项和评审结果，如：

```
| 检查项 | 检查标准 | 评审结果 | 问题描述 | 优先级 | 参考文档 |
|-------|---------|---------|---------|--------|---------|
| SAD文档包含10个章节 | 覆盖IEEE 1016-2009标准要求的10个章节 | ✅ | 无 | P0 | SAD目录 |
| 逻辑视图覆盖所有限界上下文 | 每个限界上下文有完整的领域模型设计 | ✅ | 无 | P0 | 逻辑视图§2 |
| 性能目标量化 | 性能需求有具体的量化指标（QPS/延迟/吞吐量） | ⚠️ | 缺少P95延迟指标 | P1 | SAD §9.1 |
| 认证方案完整 | 有明确的认证方案（OAuth2.0/JWT/SAML） | ✅ | 无 | P0 | SAD §8.1 |
| 无循环依赖 | 组件间无循环依赖 | ❌ | visitor-service和notification-service存在循环依赖 | P0 | 组件图§5.2 |

...
```
