# 05-æ—¶åºå›¾è®¾è®¡æç¤ºè¯

## ðŸ’¡ ä½¿ç”¨è¯´æ˜Ž

æœ¬æç¤ºè¯ç”¨äºŽæ ¹æ®ç±»å›¾è®¾è®¡å’Œä¸šåŠ¡æµç¨‹ï¼Œç”Ÿæˆå…³é”®ä¸šåŠ¡åœºæ™¯çš„æ—¶åºå›¾ï¼ˆSequence Diagramï¼‰ï¼Œå±•ç¤ºå¯¹è±¡é—´çš„äº¤äº’æµç¨‹ã€‚è¯·å°†ã€ã€‘ä¸­çš„å ä½ç¬¦æ›¿æ¢ä¸ºä½ çš„å®žé™…é¡¹ç›®ä¿¡æ¯ã€‚

---

## ðŸ“‹ å®Œæ•´æç¤ºè¯ï¼ˆå¤åˆ¶ä»¥ä¸‹å†…å®¹åˆ°AIå·¥å…·ï¼‰

```
---

## ðŸŽ­ R - è§’è‰²å®šä¹‰

ä½ æ˜¯ä¸€ä½èµ„æ·±ç³»ç»Ÿåˆ†æžå¸ˆï¼Œæ‹¥æœ‰10å¹´ä¸šåŠ¡æµç¨‹å»ºæ¨¡å’Œäº¤äº’è®¾è®¡ç»éªŒï¼Œæ“…é•¿ï¼š

- UMLæ—¶åºå›¾è®¾è®¡ä¸ŽåŠ¨æ€å»ºæ¨¡
- ä¸šåŠ¡æµç¨‹åˆ†æžä¸Žå¼‚å¸¸åœºæ™¯å¤„ç†
- å¯¹è±¡äº¤äº’è®¾è®¡ä¸Žæ¶ˆæ¯ä¼ é€’å»ºæ¨¡
- Mermaidæ—¶åºå›¾è¯­æ³•ä¸Žå¯è§†åŒ–
- åˆ†å¸ƒå¼ç³»ç»Ÿå¼‚æ­¥äº¤äº’è®¾è®¡

---

## ðŸ“‹ T - ä»»åŠ¡æè¿°

åŸºäºŽå·²å®Œæˆçš„ç±»å›¾è®¾è®¡æ–‡æ¡£å’Œä¸šåŠ¡éœ€æ±‚ï¼Œä¸ºç³»ç»Ÿå…³é”®ä¸šåŠ¡åœºæ™¯è®¾è®¡è¯¦ç»†çš„æ—¶åºå›¾ï¼Œæ¸…æ™°å±•ç¤ºå¯¹è±¡é—´çš„äº¤äº’é¡ºåºã€æ¶ˆæ¯ä¼ é€’ã€æ¡ä»¶åˆ†æ”¯ã€å¾ªçŽ¯ã€å¼‚å¸¸å¤„ç†ã€‚

### è¾“å…¥ææ–™

#### ææ–™1ï¼šç±»å›¾è®¾è®¡æ–‡æ¡£

ã€åœ¨æ­¤ç²˜è´´æ­¥éª¤04ç”Ÿæˆçš„ç±»å›¾è®¾è®¡æ–‡æ¡£å®Œæ•´å†…å®¹ã€‘

#### ææ–™2ï¼šé€»è¾‘è§†å›¾è®¾è®¡æ–‡æ¡£ï¼ˆå¯é€‰ï¼Œç”¨äºŽè¡¥å……ä¸šåŠ¡æµç¨‹ï¼‰

ã€åœ¨æ­¤ç²˜è´´æ­¥éª¤03ç”Ÿæˆçš„é€»è¾‘è§†å›¾æ–‡æ¡£ã€‘

#### ææ–™3ï¼šè½¯ä»¶æž¶æž„è®¾è®¡æ–‡æ¡£ï¼ˆSADï¼‰ï¼ˆå¯é€‰ï¼Œç”¨äºŽè¡¥å……ä¸šåŠ¡åœºæ™¯ï¼‰

ã€åœ¨æ­¤ç²˜è´´æ­¥éª¤02ç”Ÿæˆçš„SADæ–‡æ¡£Â§2ç³»ç»Ÿæ¦‚è¿°å’ŒÂ§7æŽ¥å£æž¶æž„è®¾è®¡ã€‘

### ä»»åŠ¡ä¸Šä¸‹æ–‡

- æœ¬ä»»åŠ¡æ˜¯è¯¦ç»†è®¾è®¡å·¥ä½œæµçš„ç¬¬äº”æ­¥ï¼Œå°†é™æ€çš„ç±»å›¾è½¬åŒ–ä¸ºåŠ¨æ€çš„äº¤äº’æµç¨‹
- æ—¶åºå›¾èšç„¦æ ¸å¿ƒä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚ç”¨æˆ·æ³¨å†Œã€è®¢å•åˆ›å»ºã€æ”¯ä»˜æµç¨‹ç­‰ï¼‰
- è®¾è®¡éœ€è¦†ç›–æ­£å¸¸æµç¨‹ã€å¼‚å¸¸æµç¨‹ã€è¾¹ç•Œæ¡ä»¶
- æ‰€æœ‰è®¾è®¡å†³ç­–éœ€å¯è¿½æº¯åˆ°ç±»å›¾è®¾è®¡å’Œä¸šåŠ¡éœ€æ±‚

---

## ðŸŽ¯ G - ç›®æ ‡ä¸Žæ„å›¾

### æ ¸å¿ƒç›®æ ‡

è®¾è®¡æ¸…æ™°ã€å®Œæ•´ã€å¯æ‰§è¡Œçš„æ—¶åºå›¾ï¼Œç¡®ä¿å¼€å‘å›¢é˜Ÿç†è§£å¯¹è±¡é—´çš„äº¤äº’é€»è¾‘å’Œæ¶ˆæ¯ä¼ é€’é¡ºåºã€‚

### å…·ä½“ç›®æ ‡

1. **åœºæ™¯å®Œæ•´æ€§**: è¯†åˆ«å¹¶è®¾è®¡3-7ä¸ªæ ¸å¿ƒä¸šåŠ¡åœºæ™¯ï¼Œè¦†ç›–ç³»ç»Ÿçš„ä¸»è¦ä¸šåŠ¡æµç¨‹
2. **äº¤äº’æ¸…æ™°æ€§**: æ¸…æ™°å±•ç¤ºå¯¹è±¡é—´çš„æ¶ˆæ¯ä¼ é€’ã€è°ƒç”¨é¡ºåºã€è¿”å›žå€¼ã€æ¿€æ´»æœŸ
3. **å¼‚å¸¸å¤„ç†**: è®¾è®¡å¼‚å¸¸åˆ†æ”¯ï¼ˆaltï¼‰ã€å¾ªçŽ¯ï¼ˆloopï¼‰ã€å¯é€‰ï¼ˆoptï¼‰ç­‰æŽ§åˆ¶ç»“æž„
4. **å¯å®žçŽ°æ€§**: æ—¶åºå›¾å¯ç›´æŽ¥æ˜ å°„åˆ°ä»£ç å®žçŽ°ï¼ˆæ–¹æ³•è°ƒç”¨ã€å¼‚æ­¥æ¶ˆæ¯ã€äº‹ä»¶å‘å¸ƒï¼‰

### ä¸šåŠ¡ä»·å€¼

- **ä¸ºå¼€å‘å›¢é˜Ÿ**: æä¾›äº¤äº’é€»è¾‘è“å›¾ï¼Œæ˜Žç¡®æ–¹æ³•è°ƒç”¨é¡ºåºå’Œå‚æ•°ä¼ é€’
- **ä¸ºæµ‹è¯•å›¢é˜Ÿ**: æä¾›æµ‹è¯•åœºæ™¯ä¾æ®ï¼Œè®¾è®¡é›†æˆæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•ç”¨ä¾‹
- **ä¸ºä»£ç è¯„å®¡**: è¯†åˆ«è¿åäº¤äº’è®¾è®¡çš„å®žçŽ°ï¼ˆå¦‚è·¨å±‚è°ƒç”¨ã€å¾ªçŽ¯ä¾èµ–ï¼‰
- **ä¸ºæ€§èƒ½ä¼˜åŒ–**: è¯†åˆ«åŒæ­¥é˜»å¡žç‚¹ã€å¼‚æ­¥ä¼˜åŒ–æœºä¼šã€ç¼“å­˜æ’å…¥ç‚¹

### æˆåŠŸæ ‡å‡†

- âœ… è®¾è®¡3-7ä¸ªæ ¸å¿ƒä¸šåŠ¡åœºæ™¯çš„æ—¶åºå›¾ï¼ˆä½¿ç”¨Mermaidï¼‰
- âœ… æ¯ä¸ªæ—¶åºå›¾è¦†ç›–æ­£å¸¸æµç¨‹å’Œè‡³å°‘1ä¸ªå¼‚å¸¸æµç¨‹
- âœ… å¯¹è±¡å’Œæ¶ˆæ¯ä¸Žç±»å›¾è®¾è®¡ä¸€è‡´ï¼ˆç±»åã€æ–¹æ³•åå‡†ç¡®ï¼‰
- âœ… å¼‚æ­¥äº¤äº’å’Œäº‹ä»¶é©±åŠ¨åœºæ™¯æœ‰æ˜Žç¡®æ ‡æ³¨
- âœ… æ‰€æœ‰è®¾è®¡å†³ç­–å¯è¿½æº¯åˆ°ç±»å›¾å’Œä¸šåŠ¡éœ€æ±‚

---

## ðŸ“¤ O - è¾“å‡ºè¦æ±‚

### 1. è¾“å‡ºç»“æž„

#### ç¬¬1éƒ¨åˆ†ï¼šæ—¶åºå›¾è®¾è®¡æ€»è§ˆ

**1.1 ä¸šåŠ¡åœºæ™¯æ¸…å•**
- ï¼ˆæ¥è‡ªSAD Â§2.3 æ ¸å¿ƒåŠŸèƒ½ï¼‰
- ä½¿ç”¨è¡¨æ ¼åˆ—å‡ºæ‰€æœ‰éœ€è¦è®¾è®¡æ—¶åºå›¾çš„ä¸šåŠ¡åœºæ™¯
- æ ¼å¼ï¼šåœºæ™¯ç¼–å· | åœºæ™¯åç§° | ä¸šåŠ¡æè¿° | ä¼˜å…ˆçº§ï¼ˆP0/P1/P2ï¼‰ | æ¶‰åŠçš„é™ç•Œä¸Šä¸‹æ–‡

**1.2 æ—¶åºå›¾è®¾è®¡åŽŸåˆ™**
- è¯´æ˜Žæ—¶åºå›¾è®¾è®¡éµå¾ªçš„åŽŸåˆ™
- ç¤ºä¾‹ï¼š
  - éµå¾ªåˆ†å±‚æž¶æž„ï¼ˆControllerâ†’Serviceâ†’Domainâ†’Repositoryï¼‰
  - å¼‚æ­¥æ¶ˆæ¯ä½¿ç”¨è™šçº¿ç®­å¤´
  - äº‹åŠ¡è¾¹ç•Œæ˜Žç¡®æ ‡æ³¨
  - å¼‚å¸¸å¤„ç†ä½¿ç”¨altåˆ†æ”¯

**1.3 æ—¶åºå›¾å›¾ä¾‹è¯´æ˜Ž**
- ä½¿ç”¨è¡¨æ ¼è¯´æ˜ŽMermaidæ—¶åºå›¾ä¸­çš„ç¬¦å·å«ä¹‰
- æ ¼å¼ï¼šç¬¦å· | å«ä¹‰ | ç¤ºä¾‹

---

#### ç¬¬2éƒ¨åˆ†ï¼šæ ¸å¿ƒä¸šåŠ¡åœºæ™¯æ—¶åºå›¾

é’ˆå¯¹æ¯ä¸ªæ ¸å¿ƒä¸šåŠ¡åœºæ™¯ï¼Œæä¾›ä»¥ä¸‹å†…å®¹ï¼š

**åœºæ™¯ã€ç¼–å·ã€‘ï¼šã€åœºæ™¯åç§°ã€‘**

**2.1 åœºæ™¯æ¦‚è¿°**
- **ä¸šåŠ¡ç›®æ ‡**: ã€è¯¥åœºæ™¯è¦å®Œæˆçš„ä¸šåŠ¡ç›®æ ‡ã€‘
- **å‰ç½®æ¡ä»¶**: ã€åœºæ™¯æ‰§è¡Œå‰éœ€è¦æ»¡è¶³çš„æ¡ä»¶ã€‘
- **åŽç½®æ¡ä»¶**: ã€åœºæ™¯æ‰§è¡ŒåŽçš„ç³»ç»ŸçŠ¶æ€ã€‘
- **å‚ä¸Žå¯¹è±¡**: ã€åˆ—å‡ºå‚ä¸Žçš„å¯¹è±¡/ç»„ä»¶ã€‘
- **æ¶‰åŠä¸Šä¸‹æ–‡**: ã€æ¶‰åŠçš„é™ç•Œä¸Šä¸‹æ–‡ã€‘

**2.2 æ­£å¸¸æµç¨‹æ—¶åºå›¾**

ä½¿ç”¨Mermaid sequenceDiagramç»˜åˆ¶æ­£å¸¸æµç¨‹ï¼š

```mermaid
sequenceDiagram
    actor ã€å‚ä¸Žè€…ã€‘
    participant ã€å¯¹è±¡1ã€‘
    participant ã€å¯¹è±¡2ã€‘
    participant ã€å¯¹è±¡3ã€‘
    
    ã€å‚ä¸Žè€…ã€‘->>ã€å¯¹è±¡1ã€‘: ã€æ¶ˆæ¯1ã€‘(å‚æ•°)
    activate ã€å¯¹è±¡1ã€‘
    ã€å¯¹è±¡1ã€‘->>ã€å¯¹è±¡2ã€‘: ã€æ¶ˆæ¯2ã€‘(å‚æ•°)
    activate ã€å¯¹è±¡2ã€‘
    ã€å¯¹è±¡2ã€‘->>ã€å¯¹è±¡3ã€‘: ã€æ¶ˆæ¯3ã€‘(å‚æ•°)
    activate ã€å¯¹è±¡3ã€‘
    ã€å¯¹è±¡3ã€‘-->>ã€å¯¹è±¡2ã€‘: ã€è¿”å›žå€¼ã€‘
    deactivate ã€å¯¹è±¡3ã€‘
    ã€å¯¹è±¡2ã€‘-->>ã€å¯¹è±¡1ã€‘: ã€è¿”å›žå€¼ã€‘
    deactivate ã€å¯¹è±¡2ã€‘
    ã€å¯¹è±¡1ã€‘-->>ã€å‚ä¸Žè€…ã€‘: ã€è¿”å›žå€¼ã€‘
    deactivate ã€å¯¹è±¡1ã€‘
```

**2.3 æµç¨‹æ­¥éª¤è¯´æ˜Ž**

ä½¿ç”¨è¡¨æ ¼è¯¦ç»†è¯´æ˜Žæ¯ä¸ªäº¤äº’æ­¥éª¤ï¼š

| æ­¥éª¤ | å‘é€æ–¹ | æŽ¥æ”¶æ–¹ | æ¶ˆæ¯/æ–¹æ³• | å‚æ•° | è¿”å›žå€¼ | è¯´æ˜Ž | å¯¹åº”ç±»å›¾æ–¹æ³• |
|------|--------|--------|----------|------|--------|------|--------------|
| 1 | ã€å‘é€æ–¹ã€‘ | ã€æŽ¥æ”¶æ–¹ã€‘ | ã€æ¶ˆæ¯ã€‘ | ã€å‚æ•°ã€‘ | ã€è¿”å›žå€¼ã€‘ | ã€è¯´æ˜Žã€‘ | ã€ç±»å›¾Â§X.Xã€‘ |
| 2 | ... | ... | ... | ... | ... | ... | ... |

**2.4 å¼‚å¸¸æµç¨‹æ—¶åºå›¾**

ä½¿ç”¨Mermaid sequenceDiagramç»˜åˆ¶å¼‚å¸¸åˆ†æ”¯ï¼š

```mermaid
sequenceDiagram
    actor ã€å‚ä¸Žè€…ã€‘
    participant ã€å¯¹è±¡1ã€‘
    participant ã€å¯¹è±¡2ã€‘
    
    ã€å‚ä¸Žè€…ã€‘->>ã€å¯¹è±¡1ã€‘: ã€æ¶ˆæ¯ã€‘(å‚æ•°)
    activate ã€å¯¹è±¡1ã€‘
    
    alt ã€æ­£å¸¸æƒ…å†µã€‘
        ã€å¯¹è±¡1ã€‘->>ã€å¯¹è±¡2ã€‘: ã€æ¶ˆæ¯ã€‘
        ã€å¯¹è±¡2ã€‘-->>ã€å¯¹è±¡1ã€‘: æˆåŠŸ
        ã€å¯¹è±¡1ã€‘-->>ã€å‚ä¸Žè€…ã€‘: æˆåŠŸå“åº”
    else ã€å¼‚å¸¸æƒ…å†µ1ã€‘
        ã€å¯¹è±¡1ã€‘-->>ã€å‚ä¸Žè€…ã€‘: é”™è¯¯æç¤º1
    else ã€å¼‚å¸¸æƒ…å†µ2ã€‘
        ã€å¯¹è±¡1ã€‘->>ã€å¯¹è±¡2ã€‘: ã€æ¶ˆæ¯ã€‘
        ã€å¯¹è±¡2ã€‘-->>ã€å¯¹è±¡1ã€‘: å¤±è´¥
        ã€å¯¹è±¡1ã€‘-->>ã€å‚ä¸Žè€…ã€‘: é”™è¯¯æç¤º2
    end
    
    deactivate ã€å¯¹è±¡1ã€‘
```

**2.5 å¼‚å¸¸åœºæ™¯è¯´æ˜Ž**

ä½¿ç”¨è¡¨æ ¼è¯´æ˜Žå¼‚å¸¸åœºæ™¯å¤„ç†ï¼š

| å¼‚å¸¸åœºæ™¯ | è§¦å‘æ¡ä»¶ | å¼‚å¸¸å¤„ç† | è¿”å›žé”™è¯¯ç  | ç”¨æˆ·æç¤º |
|---------|---------|---------|-----------|---------|
| ã€å¼‚å¸¸1ã€‘ | ã€æ¡ä»¶ã€‘ | ã€å¤„ç†ã€‘ | ã€é”™è¯¯ç ã€‘ | ã€æç¤ºã€‘ |
| ã€å¼‚å¸¸2ã€‘ | ã€æ¡ä»¶ã€‘ | ã€å¤„ç†ã€‘ | ã€é”™è¯¯ç ã€‘ | ã€æç¤ºã€‘ |

**2.6 æ€§èƒ½ä¸Žä¼˜åŒ–å»ºè®®**
- è¯†åˆ«åŒæ­¥é˜»å¡žç‚¹ï¼šã€å“ªäº›è°ƒç”¨å¯èƒ½é˜»å¡žã€‘
- å¼‚æ­¥ä¼˜åŒ–æœºä¼šï¼šã€å“ªäº›è°ƒç”¨å¯ä»¥å¼‚æ­¥åŒ–ã€‘
- ç¼“å­˜æ’å…¥ç‚¹ï¼šã€å“ªäº›æŸ¥è¯¢å¯ä»¥ç¼“å­˜ã€‘
- äº‹åŠ¡è¾¹ç•Œï¼šã€äº‹åŠ¡çš„å¼€å§‹å’Œæäº¤ç‚¹ã€‘

**2.7 å¯è¿½æº¯æ€§**
- è¯¥æ—¶åºå›¾å¯¹åº”çš„ç±»å›¾ï¼šã€ç±»å›¾Â§X.Xã€‘
- è¯¥æ—¶åºå›¾å¯¹åº”çš„ä¸šåŠ¡éœ€æ±‚ï¼šã€SAD Â§X.Xã€‘

---

**åœºæ™¯ã€ç¼–å·ã€‘ï¼šã€åœºæ™¯åç§°ã€‘**
...ï¼ˆé‡å¤ä¸Šè¿°ç¬¬2éƒ¨åˆ†ç»“æž„ï¼‰

---

#### ç¬¬3éƒ¨åˆ†ï¼šè·¨ä¸Šä¸‹æ–‡äº¤äº’æ—¶åºå›¾

**3.1 è·¨ä¸Šä¸‹æ–‡åœºæ™¯æ¦‚è¿°**
- ï¼ˆæ¥è‡ªé€»è¾‘è§†å›¾Â§2.3 ä¸Šä¸‹æ–‡é›†æˆç­–ç•¥ï¼‰
- è¯´æ˜Žå“ªäº›åœºæ™¯æ¶‰åŠå¤šä¸ªé™ç•Œä¸Šä¸‹æ–‡çš„äº¤äº’

**3.2 è·¨ä¸Šä¸‹æ–‡æ—¶åºå›¾**

é’ˆå¯¹æ¶‰åŠå¤šä¸ªä¸Šä¸‹æ–‡çš„åœºæ™¯ï¼Œç»˜åˆ¶è·¨ä¸Šä¸‹æ–‡æ—¶åºå›¾ï¼š

```mermaid
sequenceDiagram
    participant ã€ä¸Šä¸‹æ–‡1ã€‘
    participant ã€é˜²è…å±‚ã€‘
    participant ã€ä¸Šä¸‹æ–‡2ã€‘
    
    ã€ä¸Šä¸‹æ–‡1ã€‘->>ã€é˜²è…å±‚ã€‘: ã€é€‚é…è¯·æ±‚ã€‘
    ã€é˜²è…å±‚ã€‘->>ã€ä¸Šä¸‹æ–‡2ã€‘: ã€è½¬æ¢åŽçš„è¯·æ±‚ã€‘
    ã€ä¸Šä¸‹æ–‡2ã€‘-->>ã€é˜²è…å±‚ã€‘: ã€å“åº”ã€‘
    ã€é˜²è…å±‚ã€‘-->>ã€ä¸Šä¸‹æ–‡1ã€‘: ã€é€‚é…åŽçš„å“åº”ã€‘
```

**3.3 é›†æˆæ¨¡å¼è¯´æ˜Ž**
- é˜²è…å±‚ä½œç”¨ï¼šã€æ•°æ®æ¨¡åž‹è½¬æ¢ã€åè®®é€‚é…ã€‘
- é€šä¿¡æ–¹å¼ï¼šã€åŒæ­¥è°ƒç”¨/å¼‚æ­¥æ¶ˆæ¯/äº‹ä»¶é©±åŠ¨ã€‘
- ä¸€è‡´æ€§ä¿è¯ï¼šã€æœ€ç»ˆä¸€è‡´æ€§/å¼ºä¸€è‡´æ€§ã€‘

---

#### ç¬¬4éƒ¨åˆ†ï¼šå¼‚æ­¥äº¤äº’ä¸Žäº‹ä»¶é©±åŠ¨æ—¶åºå›¾

**4.1 å¼‚æ­¥åœºæ™¯æ¸…å•**
- åˆ—å‡ºæ‰€æœ‰æ¶‰åŠå¼‚æ­¥å¤„ç†çš„åœºæ™¯
- æ ¼å¼ï¼šåœºæ™¯åç§° | å¼‚æ­¥åŽŸå›  | æ¶ˆæ¯é˜Ÿåˆ—/äº‹ä»¶æ€»çº¿

**4.2 å¼‚æ­¥æ—¶åºå›¾ç¤ºä¾‹**

```mermaid
sequenceDiagram
    participant ã€æœåŠ¡Aã€‘
    participant ã€æ¶ˆæ¯é˜Ÿåˆ—ã€‘
    participant ã€æœåŠ¡Bã€‘
    
    ã€æœåŠ¡Aã€‘->>ã€æ¶ˆæ¯é˜Ÿåˆ—ã€‘: å‘å¸ƒäº‹ä»¶ï¼ˆå¼‚æ­¥ï¼‰
    activate ã€æ¶ˆæ¯é˜Ÿåˆ—ã€‘
    ã€æœåŠ¡Aã€‘-->>å®¢æˆ·ç«¯: è¿”å›žï¼ˆä¸ç­‰å¾…ï¼‰
    
    ã€æ¶ˆæ¯é˜Ÿåˆ—ã€‘->>ã€æœåŠ¡Bã€‘: æŽ¨é€äº‹ä»¶
    activate ã€æœåŠ¡Bã€‘
    ã€æœåŠ¡Bã€‘->>ã€æœåŠ¡Bã€‘: å¤„ç†äº‹ä»¶
    ã€æœåŠ¡Bã€‘-->>ã€æ¶ˆæ¯é˜Ÿåˆ—ã€‘: ç¡®è®¤æ¶ˆè´¹
    deactivate ã€æœåŠ¡Bã€‘
    deactivate ã€æ¶ˆæ¯é˜Ÿåˆ—ã€‘
```

**4.3 äº‹ä»¶é©±åŠ¨è¯´æ˜Ž**
- äº‹ä»¶å®šä¹‰ï¼šã€äº‹ä»¶åç§°ã€äº‹ä»¶payloadã€‘
- å‘å¸ƒè€…ï¼šã€å“ªä¸ªæœåŠ¡å‘å¸ƒã€‘
- è®¢é˜…è€…ï¼šã€å“ªäº›æœåŠ¡è®¢é˜…ã€‘
- å¹‚ç­‰æ€§ä¿è¯ï¼šã€å¦‚ä½•å¤„ç†é‡å¤æ¶ˆè´¹ã€‘

---

#### ç¬¬5éƒ¨åˆ†ï¼šæ—¶åºå›¾è®¾è®¡æ€»ç»“

**5.1 åœºæ™¯è¦†ç›–ç»Ÿè®¡**
- ä½¿ç”¨è¡¨æ ¼ç»Ÿè®¡æ—¶åºå›¾è¦†ç›–æƒ…å†µ
- æ ¼å¼ï¼šé™ç•Œä¸Šä¸‹æ–‡ | æ—¶åºå›¾æ•°é‡ | è¦†ç›–çš„æ ¸å¿ƒåœºæ™¯

**5.2 è®¾è®¡äº®ç‚¹**
- åˆ—å‡ºæ—¶åºå›¾è®¾è®¡çš„3-5ä¸ªæ ¸å¿ƒäº®ç‚¹
- ç¤ºä¾‹ï¼šå¼‚å¸¸å¤„ç†å®Œæ•´ã€å¼‚æ­¥ä¼˜åŒ–åˆç†ã€äº‹åŠ¡è¾¹ç•Œæ¸…æ™°

**5.3 å®žçŽ°å»ºè®®**
- åŒæ­¥è°ƒç”¨æ³¨æ„äº‹é¡¹ï¼šã€è¶…æ—¶è®¾ç½®ã€é‡è¯•ç­–ç•¥ã€‘
- å¼‚æ­¥æ¶ˆæ¯æ³¨æ„äº‹é¡¹ï¼šã€æ¶ˆæ¯å¯é æ€§ã€å¹‚ç­‰æ€§ã€é¡ºåºæ€§ã€‘
- äº‹åŠ¡ç®¡ç†å»ºè®®ï¼šã€åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†ã€è¡¥å¿æœºåˆ¶ã€‘

**5.4 æµ‹è¯•å»ºè®®**
- å•å…ƒæµ‹è¯•ï¼šã€mockå¤–éƒ¨ä¾èµ–ï¼Œæµ‹è¯•å•ä¸ªå¯¹è±¡é€»è¾‘ã€‘
- é›†æˆæµ‹è¯•ï¼šã€æµ‹è¯•å¯¹è±¡é—´äº¤äº’ï¼ŒéªŒè¯æ—¶åºå›¾æµç¨‹ã€‘
- ç«¯åˆ°ç«¯æµ‹è¯•ï¼šã€æµ‹è¯•å®Œæ•´ä¸šåŠ¡åœºæ™¯ã€‘

---

### 2. è´¨é‡è¦æ±‚

#### å¯è¿½æº¯æ€§ï¼ˆå¼ºåˆ¶ï¼‰
- æ‰€æœ‰æ—¶åºå›¾å¿…é¡»è¿½æº¯åˆ°ç±»å›¾è®¾è®¡
- å¼•ç”¨æ ¼å¼ï¼š`ï¼ˆå¯¹åº”ç±»å›¾Â§X.X èšåˆæ ¹è®¾è®¡ï¼‰`
- æ¶ˆæ¯/æ–¹æ³•åå¿…é¡»ä¸Žç±»å›¾ä¸€è‡´

#### åˆ†å±‚åŽŸåˆ™ï¼ˆå¼ºåˆ¶ï¼‰
- éµå¾ªåˆ†å±‚æž¶æž„ï¼šControllerâ†’ApplicationServiceâ†’DomainServiceâ†’Repository
- ä¸å…è®¸è·¨å±‚è°ƒç”¨ï¼ˆå¦‚Controllerç›´æŽ¥è°ƒç”¨Repositoryï¼‰
- é¢†åŸŸå±‚ä¸ä¾èµ–åŸºç¡€è®¾æ–½å±‚ï¼ˆä½¿ç”¨æŽ¥å£ä¾èµ–å€’ç½®ï¼‰

#### æ—¶åºå›¾å…ƒç´ ï¼ˆå¼ºåˆ¶ï¼‰
- ä½¿ç”¨Mermaid sequenceDiagramè¯­æ³•
- å‚ä¸Žè€…ç±»åž‹ï¼š
  - `actor`ï¼šå¤–éƒ¨ç”¨æˆ·
  - `participant`ï¼šç³»ç»Ÿå¯¹è±¡/æœåŠ¡
- æ¶ˆæ¯ç±»åž‹ï¼š
  - `->>`: åŒæ­¥è°ƒç”¨ï¼ˆå®žçº¿ç®­å¤´ï¼‰
  - `-->>`: è¿”å›žï¼ˆè™šçº¿ç®­å¤´ï¼‰
  - `--)`: å¼‚æ­¥æ¶ˆæ¯ï¼ˆå¼€æ”¾ç®­å¤´ï¼‰
- æŽ§åˆ¶ç»“æž„ï¼š
  - `alt...else...end`: æ¡ä»¶åˆ†æ”¯
  - `loop...end`: å¾ªçŽ¯
  - `opt...end`: å¯é€‰
  - `par...end`: å¹¶è¡Œ
- æ¿€æ´»/å¤±æ´»ï¼š`activate`/`deactivate`

#### å¼‚å¸¸å¤„ç†ï¼ˆå¼ºåˆ¶ï¼‰
- æ¯ä¸ªæ ¸å¿ƒåœºæ™¯å¿…é¡»è®¾è®¡è‡³å°‘1ä¸ªå¼‚å¸¸åˆ†æ”¯
- å¼‚å¸¸åœºæ™¯å¿…é¡»æœ‰æ˜Žç¡®çš„é”™è¯¯ç å’Œç”¨æˆ·æç¤º
- è€ƒè™‘è¾¹ç•Œæ¡ä»¶ï¼ˆå¦‚ç©ºåˆ—è¡¨ã€è¶…æ—¶ã€é‡å¤è¯·æ±‚ï¼‰

---

### 3. æ ¼å¼è§„èŒƒ

- **æ–‡æ¡£æ ¼å¼**: Markdown
- **æ ‡é¢˜å±‚çº§**: ä½¿ç”¨##ï¼ˆç¬¬1éƒ¨åˆ†ï¼‰ã€###ï¼ˆ2.1èŠ‚ï¼‰ã€####ï¼ˆæµç¨‹æ­¥éª¤è¯´æ˜Žï¼‰
- **è¡¨æ ¼**: ç”¨äºŽæ­¥éª¤è¯´æ˜Žã€å¼‚å¸¸åœºæ™¯ã€åœºæ™¯ç»Ÿè®¡
- **Mermaidå›¾è¡¨**: ä½¿ç”¨\`\`\`mermaid sequenceDiagramä»£ç å—
- **Emoji**: 
  - ðŸ”„ æ­£å¸¸æµç¨‹
  - âš ï¸ å¼‚å¸¸æµç¨‹
  - â±ï¸ å¼‚æ­¥äº¤äº’
  - ðŸ”” äº‹ä»¶é©±åŠ¨
  - ðŸ”’ äº‹åŠ¡è¾¹ç•Œ

---

### 4. ç‰¹åˆ«è¯´æ˜Ž

#### æ ¸å¿ƒåœºæ™¯é€‰æ‹©åŽŸåˆ™
- ä¼˜å…ˆè®¾è®¡P0åœºæ™¯ï¼ˆæ ¸å¿ƒä¸šåŠ¡æµç¨‹ï¼‰
- é€‰æ‹©æ¶‰åŠå¤šä¸ªå¯¹è±¡/æœåŠ¡äº¤äº’çš„å¤æ‚åœºæ™¯
- é€‰æ‹©æœ‰å¼‚å¸¸å¤„ç†å’Œè¾¹ç•Œæ¡ä»¶çš„åœºæ™¯
- åœºæ™¯æ•°é‡æŽ§åˆ¶åœ¨3-7ä¸ªï¼ˆé¿å…è¿‡å¤šè¿‡ç»†ï¼‰

#### å¼‚æ­¥vsåŒæ­¥é€‰æ‹©
- **åŒæ­¥è°ƒç”¨**: éœ€è¦ç«‹å³è¿”å›žç»“æžœã€å¼ºä¸€è‡´æ€§è¦æ±‚
- **å¼‚æ­¥æ¶ˆæ¯**: è€—æ—¶æ“ä½œã€æœ€ç»ˆä¸€è‡´æ€§å¯æŽ¥å—ã€è§£è€¦éœ€æ±‚
- å¼‚æ­¥åœºæ™¯å¿…é¡»è€ƒè™‘ï¼šæ¶ˆæ¯å¯é æ€§ã€å¹‚ç­‰æ€§ã€é¡ºåºæ€§

#### äº‹åŠ¡è¾¹ç•Œè®¾è®¡
- äº‹åŠ¡è¾¹ç•Œé€šå¸¸åœ¨åº”ç”¨å±‚ï¼ˆApplicationServiceï¼‰
- ä¸€ä¸ªèšåˆä¸€ä¸ªäº‹åŠ¡ï¼ˆä¸è·¨èšåˆäº‹åŠ¡ï¼‰
- è·¨èšåˆä¸€è‡´æ€§ä½¿ç”¨æœ€ç»ˆä¸€è‡´æ€§ï¼ˆäº‹ä»¶é©±åŠ¨ï¼‰
- åˆ†å¸ƒå¼äº‹åŠ¡ä½¿ç”¨Sagaæ¨¡å¼æˆ–TCC

#### æ€§èƒ½ä¼˜åŒ–è€ƒé‡
- è¯†åˆ«N+1æŸ¥è¯¢é—®é¢˜ï¼ˆå¾ªçŽ¯è°ƒç”¨ï¼‰
- è¯†åˆ«ä¸²è¡Œè°ƒç”¨å¯å¹¶è¡ŒåŒ–çš„åœ°æ–¹
- è¯†åˆ«å¯ç¼“å­˜çš„æŸ¥è¯¢ï¼ˆä¸å˜æ•°æ®ã€ä½Žå˜åŒ–é¢‘çŽ‡ï¼‰
- è¯†åˆ«å¯å¼‚æ­¥åŒ–çš„æ“ä½œï¼ˆå‘é€é€šçŸ¥ã€ç”ŸæˆæŠ¥è¡¨ï¼‰

#### ä¿¡æ¯ä¸è¶³çš„å¤„ç†
å¦‚æžœç±»å›¾æˆ–ä¸šåŠ¡éœ€æ±‚ä¸­ç¼ºå°‘æŸäº›äº¤äº’ç»†èŠ‚ï¼Œä½ åº”è¯¥ï¼š
1. **åŸºäºŽåˆ†å±‚æž¶æž„æŽ¨æ–­**: æ ‡æ³¨`ï¼ˆåŸºäºŽåˆ†å±‚æž¶æž„æŽ¨æ–­ï¼‰`
2. **å‚è€ƒè¡Œä¸šæœ€ä½³å®žè·µ**: æ ‡æ³¨`ï¼ˆå‚è€ƒ{æ¨¡å¼/å®žè·µ}ï¼‰`
3. **æ ‡æ³¨å¾…ç¡®è®¤é¡¹**: `ã€å¾…ç¡®è®¤ã€‘{äº¤äº’é€»è¾‘}`

---

### 5. è¾“å‡ºæ ¼å¼

ç›´æŽ¥è¾“å‡ºå®Œæ•´çš„æ—¶åºå›¾è®¾è®¡æ–‡æ¡£ï¼Œä¸è¦æœ‰ä»»ä½•å‰è¨€æˆ–è§£é‡Šã€‚æ–‡æ¡£ä»¥"# æ—¶åºå›¾è®¾è®¡æ–‡æ¡£ï¼ˆSequence Diagramï¼‰"å¼€å¤´ã€‚

---
```

---

## ðŸ“Œ ç¤ºä¾‹ï¼šè®¿å®¢ç®¡ç†ç³»ç»Ÿçš„è¾“å…¥ææ–™

å‡è®¾ä½ è¦ä¸º"è®¿å®¢ç®¡ç†ç³»ç»Ÿ"è®¾è®¡æ—¶åºå›¾ï¼Œè¾“å…¥ææ–™åº”è¯¥æ˜¯ï¼š

### è¾“å…¥ææ–™ç¤ºä¾‹

```
#### ææ–™1ï¼šç±»å›¾è®¾è®¡æ–‡æ¡£

ï¼ˆè¿™é‡Œç²˜è´´æ­¥éª¤04ç”Ÿæˆçš„å®Œæ•´ç±»å›¾æ–‡æ¡£ï¼Œç‰¹åˆ«å…³æ³¨ï¼š
- Â§2 æ ¸å¿ƒç±»å›¾è®¾è®¡ï¼ˆèšåˆæ ¹ã€é¢†åŸŸæœåŠ¡ã€ä»“å‚¨æŽ¥å£ï¼‰
ï¼‰

#### ææ–™2ï¼šé€»è¾‘è§†å›¾è®¾è®¡æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰

ï¼ˆè¿™é‡Œç²˜è´´æ­¥éª¤03ç”Ÿæˆçš„é€»è¾‘è§†å›¾æ–‡æ¡£Â§2é¢†åŸŸæ¨¡åž‹è®¾è®¡ï¼‰

#### ææ–™3ï¼šè½¯ä»¶æž¶æž„è®¾è®¡æ–‡æ¡£ï¼ˆSADï¼‰ï¼ˆå¯é€‰ï¼‰

ï¼ˆè¿™é‡Œç²˜è´´æ­¥éª¤02ç”Ÿæˆçš„SADæ–‡æ¡£Â§2.3æ ¸å¿ƒåŠŸèƒ½ï¼‰
```

ç”Ÿæˆçš„æ—¶åºå›¾ä¼šåŒ…å«è¯¦ç»†çš„äº¤äº’æµç¨‹ï¼Œå¦‚ï¼š

```
**åœºæ™¯1ï¼šè®¿å®¢ç”³è¯·è®¿é—®**

**2.1 åœºæ™¯æ¦‚è¿°**
- **ä¸šåŠ¡ç›®æ ‡**: è®¿å®¢é€šè¿‡å°ç¨‹åºç”³è¯·è®¿é—®å…¬å¸ï¼Œå¡«å†™è®¿é—®ä¿¡æ¯å¹¶æäº¤å®¡æ‰¹
- **å‰ç½®æ¡ä»¶**: è®¿å®¢å·²å®Œæˆæ‰‹æœºå·æ³¨å†Œå’Œå®žåè®¤è¯
- **åŽç½®æ¡ä»¶**: åˆ›å»ºè®¿é—®ç”³è¯·è®°å½•ï¼ŒçŠ¶æ€ä¸º"å¾…å®¡æ‰¹"ï¼Œå‘é€å®¡æ‰¹é€šçŸ¥ç»™è¢«è®¿è€…
- **å‚ä¸Žå¯¹è±¡**: VisitorControllerã€VisitorApplicationServiceã€Visitorï¼ˆèšåˆæ ¹ï¼‰ã€VisitRepositoryã€NotificationService
- **æ¶‰åŠä¸Šä¸‹æ–‡**: è®¿å®¢ç®¡ç†ä¸Šä¸‹æ–‡ã€é€šçŸ¥ä¸Šä¸‹æ–‡

**2.2 æ­£å¸¸æµç¨‹æ—¶åºå›¾**

```mermaid
sequenceDiagram
    actor è®¿å®¢
    participant VisitorController
    participant VisitorApplicationService
    participant Visitor
    participant VisitRepository
    participant NotificationService
    
    è®¿å®¢->>VisitorController: POST /api/visits (visitRequest)
    activate VisitorController
    VisitorController->>VisitorApplicationService: applyVisit(visitRequest)
    activate VisitorApplicationService
    
    VisitorApplicationService->>VisitRepository: findById(visitorId)
    activate VisitRepository
    VisitRepository-->>VisitorApplicationService: visitor
    deactivate VisitRepository
    
    VisitorApplicationService->>Visitor: applyVisit(visitRequest)
    activate Visitor
    Visitor->>Visitor: validateVisitTime()
    Visitor->>Visitor: createVisit()
    Visitor-->>VisitorApplicationService: visit
    deactivate Visitor
    
    VisitorApplicationService->>VisitRepository: save(visitor)
    activate VisitRepository
    VisitRepository-->>VisitorApplicationService: success
    deactivate VisitRepository
    
    VisitorApplicationService->>NotificationService: notifyHost(visit)
    activate NotificationService
    NotificationService-->>VisitorApplicationService: async
    deactivate NotificationService
    
    VisitorApplicationService-->>VisitorController: visitId
    deactivate VisitorApplicationService
    VisitorController-->>è®¿å®¢: 201 Created {visitId}
    deactivate VisitorController
```

...
```
