# CIæŒç»­é›†æˆæœ€ä½³å®è·µæŒ‡å— - ç”µå­ä¹¦ç”ŸæˆæŒ‡å—

## ğŸ“š ç”µå­ä¹¦ç”Ÿæˆæ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨Gitiles + Pandoc (æ¨è)

#### å®‰è£…å·¥å…·
```bash
# 1. å®‰è£…Pandoc
# Windows: ä¸‹è½½å®‰è£…åŒ…
# https://github.com/jgm/pandoc/releases

# 2. å®‰è£…LaTeX (ç”¨äºPDFç”Ÿæˆ)
# å®‰è£…MiKTeXæˆ–TeX Live
```

#### ç”Ÿæˆå‘½ä»¤
```bash
# ç”ŸæˆPDFç”µå­ä¹¦
pandoc "CIæŒç»­é›†æˆæœ€ä½³å®è·µæŒ‡å—-Step-by-Step.md" \
    -o "CIæŒç»­é›†æˆæœ€ä½³å®è·µæŒ‡å—.pdf" \
    --toc \
    --toc-depth=3 \
    --number-sections \
    --pdf-engine=xelatex \
    -V mainfont="Microsoft YaHei" \
    -V geometry:margin=2cm

# ç”ŸæˆEPUBç”µå­ä¹¦
pandoc "CIæŒç»­é›†æˆæœ€ä½³å®è·µæŒ‡å—-Step-by-Step.md" \
    -o "CIæŒç»­é›†æˆæœ€ä½³å®è·µæŒ‡å—.epub" \
    --toc \
    --toc-depth=3 \
    --epub-cover-image=cover.jpg

# ç”ŸæˆHTMLå•é¡µé¢
pandoc "CIæŒç»­é›†æˆæœ€ä½³å®è·µæŒ‡å—-Step-by-Step.md" \
    -o "CIæŒç»­é›†æˆæœ€ä½³å®è·µæŒ‡å—.html" \
    --toc \
    --toc-depth=3 \
    --number-sections \
    --css=style.css \
    --standalone
```

### æ–¹æ¡ˆ2ï¼šä½¿ç”¨mdBook

#### å®‰è£…å’Œé…ç½®
```bash
# 1. å®‰è£…mdBook
cargo install mdbook

# 2. åˆ›å»ºç”µå­ä¹¦é¡¹ç›®
mdbook init ci-best-practices-book
cd ci-best-practices-book
```

#### ç›®å½•ç»“æ„é‡ç»„
```
ci-best-practices-book/
â”œâ”€â”€ book.toml           # é…ç½®æ–‡ä»¶
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ SUMMARY.md      # ç›®å½•ç»“æ„
â”‚   â”œâ”€â”€ introduction.md
â”‚   â”œâ”€â”€ chapter1/
â”‚   â”‚   â”œâ”€â”€ README.md
â”‚   â”‚   â”œâ”€â”€ section1.md
â”‚   â”‚   â””â”€â”€ section2.md
â”‚   â”œâ”€â”€ chapter2/
â”‚   â””â”€â”€ ...
```

### æ–¹æ¡ˆ3ï¼šä½¿ç”¨GitBook

#### åœ¨çº¿å¹³å°æ–¹æ¡ˆ
1. è®¿é—® https://www.gitbook.com/
2. å¯¼å…¥Markdownæ–‡ä»¶
3. è‡ªåŠ¨ç”Ÿæˆåœ¨çº¿ç”µå­ä¹¦
4. æ”¯æŒPDFå¯¼å‡º

### æ–¹æ¡ˆ4ï¼šä½¿ç”¨Typora (æœ€ç®€å•)

#### æ“ä½œæ­¥éª¤
1. ç”¨Typoraæ‰“å¼€Markdownæ–‡ä»¶
2. æ–‡ä»¶ â†’ å¯¼å‡º â†’ PDF/HTML/Word
3. é€‰æ‹©æ ·å¼å’Œæ ¼å¼
4. ä¸€é”®ç”Ÿæˆç”µå­ä¹¦

## ğŸ› ï¸ å®ç”¨è„šæœ¬

### PowerShellè‡ªåŠ¨åŒ–è„šæœ¬
```powershell
# generate-ebook.ps1
param(
    [string]$InputFile = "CIæŒç»­é›†æˆæœ€ä½³å®è·µæŒ‡å—-Step-by-Step.md",
    [string]$OutputDir = "output",
    [switch]$GenerateAll
)

# åˆ›å»ºè¾“å‡ºç›®å½•
if (-not (Test-Path $OutputDir)) {
    New-Item -ItemType Directory -Path $OutputDir
}

$BaseFileName = "CIæŒç»­é›†æˆæœ€ä½³å®è·µæŒ‡å—"

Write-Host "ğŸš€ å¼€å§‹ç”Ÿæˆç”µå­ä¹¦..." -ForegroundColor Green

if ($GenerateAll -or (Read-Host "ç”ŸæˆPDF? (y/n)") -eq "y") {
    Write-Host "ğŸ“„ ç”ŸæˆPDF..." -ForegroundColor Yellow
    & pandoc $InputFile `
        -o "$OutputDir\$BaseFileName.pdf" `
        --toc --toc-depth=3 --number-sections `
        --pdf-engine=xelatex `
        -V mainfont="Microsoft YaHei" `
        -V geometry:margin=2cm `
        -V documentclass=book `
        -V papersize=a4
}

if ($GenerateAll -or (Read-Host "ç”ŸæˆEPUB? (y/n)") -eq "y") {
    Write-Host "ğŸ“± ç”ŸæˆEPUB..." -ForegroundColor Yellow
    & pandoc $InputFile `
        -o "$OutputDir\$BaseFileName.epub" `
        --toc --toc-depth=3 `
        --epub-metadata=metadata.xml
}

if ($GenerateAll -or (Read-Host "ç”ŸæˆHTML? (y/n)") -eq "y") {
    Write-Host "ğŸŒ ç”ŸæˆHTML..." -ForegroundColor Yellow
    & pandoc $InputFile `
        -o "$OutputDir\$BaseFileName.html" `
        --toc --toc-depth=3 --number-sections `
        --css=github.css --standalone `
        --highlight-style=github
}

if ($GenerateAll -or (Read-Host "ç”ŸæˆWord? (y/n)") -eq "y") {
    Write-Host "ğŸ“ ç”ŸæˆWord..." -ForegroundColor Yellow
    & pandoc $InputFile `
        -o "$OutputDir\$BaseFileName.docx" `
        --toc --toc-depth=3 --number-sections `
        --reference-doc=template.docx
}

Write-Host "âœ… ç”µå­ä¹¦ç”Ÿæˆå®Œæˆï¼è¾“å‡ºç›®å½•: $OutputDir" -ForegroundColor Green
```

### æ–‡æ¡£åˆ†å‰²è„šæœ¬
```powershell
# split-chapters.ps1 - å°†å¤§æ–‡æ¡£åˆ†å‰²ä¸ºç« èŠ‚
param([string]$InputFile = "CIæŒç»­é›†æˆæœ€ä½³å®è·µæŒ‡å—-Step-by-Step.md")

$content = Get-Content $InputFile -Encoding UTF8
$chapters = @{}
$currentChapter = ""
$currentContent = @()

foreach ($line in $content) {
    if ($line -match "^## .* ç¬¬(\d+)ç« ") {
        # ä¿å­˜å‰ä¸€ç« 
        if ($currentChapter -ne "") {
            $chapters[$currentChapter] = $currentContent
        }
        
        # å¼€å§‹æ–°ç« 
        $currentChapter = $matches[1]
        $currentContent = @($line)
    } else {
        $currentContent += $line
    }
}

# ä¿å­˜æœ€åä¸€ç« 
if ($currentChapter -ne "") {
    $chapters[$currentChapter] = $currentContent
}

# è¾“å‡ºç« èŠ‚æ–‡ä»¶
New-Item -ItemType Directory -Path "chapters" -Force
foreach ($chapter in $chapters.Keys) {
    $fileName = "chapters\ç¬¬${chapter}ç« .md"
    $chapters[$chapter] | Out-File $fileName -Encoding UTF8
    Write-Host "ç”Ÿæˆ: $fileName" -ForegroundColor Green
}
```

## ğŸ“‹ æ¨èé…ç½®æ–‡ä»¶

### Pandocæ ·å¼é…ç½® (style.css)
```css
/* github.css - GitHubé£æ ¼æ ·å¼ */
body {
    font-family: "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 14px;
    line-height: 1.6;
    color: #333;
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
}

h1, h2, h3, h4, h5, h6 {
    margin-top: 30px;
    margin-bottom: 16px;
    font-weight: 600;
    line-height: 1.25;
}

h1 { font-size: 2em; border-bottom: 2px solid #eaecef; padding-bottom: 10px; }
h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 8px; }
h3 { font-size: 1.25em; }

pre, code {
    font-family: "Consolas", "Liberation Mono", Menlo, Courier, monospace;
    background-color: #f6f8fa;
}

pre {
    padding: 16px;
    overflow: auto;
    border-radius: 6px;
    border: 1px solid #e1e4e8;
}

table {
    border-collapse: collapse;
    margin: 20px 0;
    width: 100%;
}

th, td {
    border: 1px solid #dfe2e5;
    padding: 8px 12px;
    text-align: left;
}

th {
    background-color: #f6f8fa;
    font-weight: 600;
}

blockquote {
    margin: 0;
    padding: 0 16px;
    color: #6a737d;
    border-left: 4px solid #dfe2e5;
}

.toc ul {
    list-style-type: none;
    padding-left: 20px;
}

.toc a {
    text-decoration: none;
    color: #0366d6;
}

.toc a:hover {
    text-decoration: underline;
}
```

### mdBooké…ç½® (book.toml)
```toml
[book]
authors = ["è¯¾ç¨‹å›¢é˜Ÿ"]
title = "CIæŒç»­é›†æˆæœ€ä½³å®è·µæŒ‡å—"
description = "ä»é›¶åˆ°ä¸€æŒæ¡ä¼ä¸šçº§CI/CDæœ€ä½³å®è·µ"
language = "zh-CN"

[build]
build-dir = "book"

[output.html]
theme = "theme"
default-theme = "light"
preferred-dark-theme = "navy"
curly-quotes = true
mathjax-support = true
copy-fonts = true
additional-css = ["theme/custom.css"]

[output.html.search]
enable = true
limit-results = 20
teaser-word-count = 30
use-boolean-and = true
boost-title = 2
boost-hierarchy = 1
boost-paragraph = 1
expand = true
heading-split-level = 2

[output.html.print]
enable = true
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ€ç®€å•çš„æ–¹æ³•
```bash
# 1. ç¡®ä¿å®‰è£…äº†Pandoc
pandoc --version

# 2. ç”ŸæˆPDF (æ¨è)
pandoc "CIæŒç»­é›†æˆæœ€ä½³å®è·µæŒ‡å—-Step-by-Step.md" -o "CIæœ€ä½³å®è·µ.pdf" --toc --pdf-engine=xelatex

# 3. ç”ŸæˆHTML
pandoc "CIæŒç»­é›†æˆæœ€ä½³å®è·µæŒ‡å—-Step-by-Step.md" -o "CIæœ€ä½³å®è·µ.html" --toc --standalone
```

### ä½¿ç”¨æˆ‘æä¾›çš„è„šæœ¬
```powershell
# è¿è¡Œè‡ªåŠ¨åŒ–è„šæœ¬
.\generate-ebook.ps1 -GenerateAll
```

## ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–

### å“åº”å¼CSS
```css
@media screen and (max-width: 768px) {
    body {
        padding: 10px;
        font-size: 16px;
    }
    
    pre {
        overflow-x: auto;
        white-space: pre-wrap;
    }
    
    table {
        font-size: 12px;
    }
}
```

## ğŸ¯ æ¨èæ–¹æ¡ˆ

**å¯¹äºä¸ªäººä½¿ç”¨ï¼š** Typoraå¯¼å‡ºæˆ–Pandocå‘½ä»¤è¡Œ
**å¯¹äºå›¢é˜Ÿåˆ†äº«ï¼š** mdBookæˆ–GitBookåœ¨çº¿ç‰ˆæœ¬  
**å¯¹äºæ­£å¼å‘å¸ƒï¼š** Pandoc + LaTeXç”Ÿæˆä¸“ä¸šPDF

é€‰æ‹©é€‚åˆæ‚¨éœ€æ±‚çš„æ–¹æ¡ˆï¼Œéƒ½èƒ½ç”Ÿæˆé«˜è´¨é‡çš„ç”µå­ä¹¦ï¼
