# P05-柱状图组件生成提示词（通用版）

> **📌 用途**: 生成ECharts柱状图（Bar）组件，用于展示分类数据的对比分析。

---

## 🎭 R - 角色定义

你是一位资深数据可视化工程师，拥有8年ECharts/D3.js开发经验，擅长：

- ECharts高级图表定制开发
- 分类数据可视化与对比分析
- 图表性能优化与大数据渲染
- 复杂交互动效实现

---

## 📋 T - 任务描述

基于以下需求，生成柱状图（Bar）组件。

### 输入材料

#### 材料1：组件需求

```
【组件名称】{填写组件名称，如"资源统计柱状图"}

【视觉效果】
- 类型：{普通柱状图/堆叠柱状图/分组柱状图/条形图}
- 尺寸：{宽度}px × {高度}px（或100%自适应）
- 柱体样式：宽度{柱宽}px，圆角{圆角}px
- 颜色方案：{纯色/渐变/分类色}
- 数据标签：{显示/隐藏}，位置{顶部/内部/外部}

【坐标轴】
- X轴：{类目名称}
- Y轴：{数值类型}，单位{单位}
- 网格线：{显示/隐藏}

【交互效果】
- Hover：{柱体高亮/显示Tooltip}
- 点击：{触发事件/下钻}
- 图例：{显示/隐藏}

【数据结构】
{
  categories: string[],   // 类目名称
  series: {
    name: string,         // 系列名称
    data: number[],       // 数据值
    color?: string        // 可选颜色
  }[]
}
```

#### 材料2：技术要求

```
- 框架：{Vue 3/React 18}
- 图表库：{ECharts 5/其他}
- 样式：使用设计系统CSS变量
- 数据更新：{定时刷新/手动}
```

### 任务上下文

{描述组件的使用场景，如"用于展示各类资源的数量对比，支持堆叠模式切换"}

---

## 🎯 G - 目标与意图

### 核心目标

生成一个**对比直观、样式美观、交互丰富**的柱状图组件，清晰展示分类数据对比。

### 具体目标

1. **对比直观**: 柱体高度差异明显，一眼识别数据大小
2. **样式美观**: 渐变色/圆角柱体，符合大屏科技风格
3. **交互丰富**: 支持Hover高亮、点击下钻、图例筛选
4. **模式切换**: 支持普通/堆叠/分组模式动态切换

### 业务价值

- **为业务人员**: 快速对比各分类指标，辅助决策
- **为分析师**: 多维度数据对比，发现差异
- **为开发团队**: 可复用组件，减少重复开发

### 成功标准

- ✅ 堆叠/分组模式切换动画流畅
- ✅ 数据标签位置自适应不重叠
- ✅ 支持负值柱状图（可选）
- ✅ 代码包含完整TypeScript类型定义

---

## 📤 O - 输出要求

### 1. 输出结构

```
src/components/charts/
├── BarChart.vue           # 柱状图组件
├── BarChart.types.ts      # 类型定义
└── useBarChart.ts         # 组合式函数（图表逻辑）
```

### 2. 质量要求

#### 代码规范
- Props使用 `defineProps<T>()` 泛型定义
- Emits定义点击事件，传递点击的数据项
- 支持通过Props切换堆叠/分组模式

#### 性能规范
- 使用 `ResizeObserver` 监听容器变化
- 模式切换使用 `setOption` 动画过渡
- 组件卸载时正确销毁图表实例

### 3. 格式规范

- ECharts配置项分离到单独函数
- 颜色使用CSS变量或设计系统定义

### 4. 特别说明

#### 渐变色配置

```typescript
const getGradientColor = (baseColor: string) => ({
  type: 'linear',
  x: 0, y: 0, x2: 0, y2: 1,
  colorStops: [
    { offset: 0, color: baseColor },
    { offset: 1, color: adjustAlpha(baseColor, 0.3) }
  ]
})
```

#### 模式切换

```typescript
const chartMode = ref<'normal' | 'stack' | 'group'>('normal')

watch(chartMode, (mode) => {
  chartInstance.value?.setOption({
    series: series.map(s => ({
      ...s,
      stack: mode === 'stack' ? 'total' : undefined
    }))
  })
})
```

---

## ✨ 输出格式

直接输出完整的Vue组件代码，包含类型定义和组合式函数。
