# P04-折线图组件生成提示词（通用版）

> **📌 用途**: 生成ECharts折线图（Line）组件，用于展示时间序列数据的趋势变化。

---

## 🎭 R - 角色定义

你是一位资深数据可视化工程师，拥有8年ECharts/D3.js开发经验，擅长：

- ECharts高级图表定制开发
- 时间序列数据可视化
- 图表性能优化与大数据渲染
- 复杂交互动效实现

---

## 📋 T - 任务描述

基于以下需求，生成折线图（Line）组件。

### 输入材料

#### 材料1：组件需求

```
【组件名称】{填写组件名称，如"运行状态趋势图"}

【视觉效果】
- 类型：{单系列/多系列/面积图}
- 尺寸：{宽度}px × {高度}px（或100%自适应）
- 线条样式：{实线/虚线}，宽度{线宽}px
- 数据点：{显示/隐藏}，大小{点大小}px
- 面积填充：{是否填充}，透明度{透明度}
- 颜色方案：{系列1颜色}、{系列2颜色}...（或渐变）

【坐标轴】
- X轴：{时间轴/类目轴}，格式{时间格式如HH:mm}
- Y轴：{数值类型}，单位{单位}，范围{自动/固定min-max}
- 网格线：{显示/隐藏}

【交互效果】
- Tooltip：{显示所有系列/只显示当前}
- 缩放：{支持/不支持}时间轴缩放
- 图例：{显示/隐藏}，点击{过滤/高亮}

【数据结构】
{
  xAxis: string[],        // X轴数据（时间点或类目）
  series: {
    name: string,         // 系列名称
    data: number[],       // 数据值
    color?: string        // 可选颜色
  }[]
}
```

#### 材料2：技术要求

```
- 框架：{Vue 3/React 18}
- 图表库：{ECharts 5/其他}
- 样式：使用设计系统CSS变量
- 数据更新：{定时刷新/实时推送/手动}
```

### 任务上下文

{描述组件的使用场景，如"用于展示系统运行指标的24小时趋势，需要支持多系列对比"}

---

## 🎯 G - 目标与意图

### 核心目标

生成一个**趋势清晰、交互友好、性能优良**的折线图组件，直观展示时间序列数据变化。

### 具体目标

1. **趋势清晰**: 平滑曲线展示数据走势，异常点突出显示
2. **交互友好**: Tooltip详细信息，支持缩放和图例筛选
3. **性能优良**: 大数据量下保持流畅（>1000个数据点）
4. **可复用**: 通过Props配置支持不同数据类型和展示需求

### 业务价值

- **为运维人员**: 快速识别趋势异常，定位问题时间点
- **为分析师**: 多系列对比分析，发现数据规律
- **为开发团队**: 可复用组件，统一图表风格

### 成功标准

- ✅ 1000+数据点渲染流畅（60fps）
- ✅ Tooltip显示精确数值和时间
- ✅ 支持动态添加数据（实时更新场景）
- ✅ 代码包含完整TypeScript类型定义

---

## 📤 O - 输出要求

### 1. 输出结构

```
src/components/charts/
├── LineChart.vue          # 折线图组件
├── LineChart.types.ts     # 类型定义
└── useLineChart.ts        # 组合式函数（图表逻辑）
```

### 2. 质量要求

#### 代码规范
- Props使用 `defineProps<T>()` 泛型定义
- 支持v-model绑定选中的数据点（可选）
- 图表实例使用 `shallowRef` 避免深度响应

#### 性能规范
- 大数据量使用采样（downsampling）
- 使用 `ResizeObserver` 监听容器变化
- 实时数据使用 `appendData` 而非全量更新

#### 交互规范
- Tooltip跟随鼠标，不遮挡数据
- 支持键盘方向键切换数据点

### 3. 格式规范

- ECharts配置项分离到单独函数
- 时间格式化使用统一工具函数
- 颜色使用CSS变量或设计系统定义

### 4. 特别说明

#### 时间轴格式化

```typescript
const formatTimeAxis = (value: string, index: number) => {
  const date = new Date(value)
  // 根据时间跨度自动选择格式
  if (isToday(date)) return format(date, 'HH:mm')
  if (isThisWeek(date)) return format(date, 'MM-dd HH:mm')
  return format(date, 'yyyy-MM-dd')
}
```

#### 实时数据追加

```typescript
const appendData = (newData: DataPoint) => {
  chartInstance.value?.appendData({
    seriesIndex: 0,
    data: [newData]
  })
  // 保持固定数据量，移除最旧数据
  if (currentData.value.length > MAX_POINTS) {
    currentData.value.shift()
  }
}
```

---

## ✨ 输出格式

直接输出完整的Vue组件代码，包含类型定义和组合式函数。

---

## 📝 使用示例

将上述"输入材料"中的占位符替换为实际项目信息即可。
