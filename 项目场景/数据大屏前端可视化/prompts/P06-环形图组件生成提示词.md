# P06-环形图组件生成提示词（通用版）

> **📌 用途**: 生成ECharts环形图/饼图（Pie）组件，用于展示数据占比分布。

---

## 🎭 R - 角色定义

你是一位资深数据可视化工程师，拥有8年ECharts/D3.js开发经验，擅长：

- ECharts高级图表定制开发
- 占比数据可视化设计
- 图表性能优化与动效实现
- 复杂交互设计

---

## 📋 T - 任务描述

基于以下需求，生成环形图/饼图（Pie）组件。

### 输入材料

#### 材料1：组件需求

```
【组件名称】{填写组件名称，如"资源分布环形图"}

【视觉效果】
- 类型：{饼图/环形图/玫瑰图}
- 尺寸：{宽度}px × {高度}px
- 内外半径：{内半径}% / {外半径}%（环形图需要）
- 颜色方案：{分类色数组}
- 扇区间隙：{间隙}px

【中心展示】（环形图适用）
- 主数值：{显示总计/选中项/固定文字}
- 副标题：{显示描述文字}

【标签展示】
- 标签位置：{外部/内部/隐藏}
- 标签内容：{名称/数值/百分比/组合}
- 引导线：{显示/隐藏}

【交互效果】
- Hover：{扇区放大/高亮}
- 点击：{选中/下钻}
- 图例：{显示/隐藏}，位置{底部/右侧}

【数据结构】
{
  data: {
    name: string,         // 分类名称
    value: number,        // 数值
    color?: string        // 可选颜色
  }[]
}
```

#### 材料2：技术要求

```
- 框架：{Vue 3/React 18}
- 图表库：{ECharts 5/其他}
- 样式：使用设计系统CSS变量
```

### 任务上下文

{描述组件的使用场景，如"用于展示资源类型分布，中心显示总数"}

---

## 🎯 G - 目标与意图

### 核心目标

生成一个**占比清晰、视觉美观、交互自然**的环形图组件，直观展示数据分布。

### 具体目标

1. **占比清晰**: 扇区大小准确反映数据占比
2. **视觉美观**: 科技感配色，中心数字突出
3. **交互自然**: Hover放大效果，点击选中反馈
4. **可复用**: 支持饼图/环形图/玫瑰图切换

### 业务价值

- **为业务人员**: 一眼看出各分类占比，理解数据分布
- **为管理层**: 简洁直观的占比展示，辅助决策
- **为开发团队**: 可复用组件，统一图表风格

### 成功标准

- ✅ 中心数字随选中项动态变化
- ✅ 小占比项自动合并为"其他"（可配置）
- ✅ 支持通过Props切换图表类型
- ✅ 代码包含完整TypeScript类型定义

---

## 📤 O - 输出要求

### 1. 输出结构

```
src/components/charts/
├── PieChart.vue           # 环形图组件
├── PieChart.types.ts      # 类型定义
└── usePieChart.ts         # 组合式函数（图表逻辑）
```

### 2. 质量要求

#### 代码规范
- Props使用 `defineProps<T>()` 泛型定义
- 支持v-model绑定选中项
- 中心数字独立组件或通过ECharts graphic实现

#### 性能规范
- 使用 `ResizeObserver` 监听容器变化
- 组件卸载时正确销毁图表实例

### 3. 格式规范

- ECharts配置项分离到单独函数
- 颜色使用设计系统定义

### 4. 特别说明

#### 中心数字实现

```typescript
// 使用ECharts graphic实现中心文字
const getCenterGraphic = (title: string, value: number) => ({
  graphic: [{
    type: 'group',
    left: 'center',
    top: 'center',
    children: [
      {
        type: 'text',
        style: {
          text: value.toLocaleString(),
          font: 'bold 36px var(--font-family-number)',
          fill: 'var(--color-text-primary)',
          textAlign: 'center'
        }
      },
      {
        type: 'text',
        top: 40,
        style: {
          text: title,
          font: '14px var(--font-family)',
          fill: 'var(--color-text-secondary)',
          textAlign: 'center'
        }
      }
    ]
  }]
})
```

#### 小占比合并

```typescript
const mergeSmallItems = (data: DataItem[], threshold = 0.05) => {
  const total = data.reduce((sum, item) => sum + item.value, 0)
  const largeItems = data.filter(item => item.value / total >= threshold)
  const smallItems = data.filter(item => item.value / total < threshold)
  
  if (smallItems.length > 0) {
    largeItems.push({
      name: '其他',
      value: smallItems.reduce((sum, item) => sum + item.value, 0)
    })
  }
  return largeItems
}
```

---

## ✨ 输出格式

直接输出完整的Vue组件代码，包含类型定义和组合式函数。
