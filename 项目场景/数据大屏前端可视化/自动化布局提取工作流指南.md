# 大屏布局信息自动化提取工作流

> **📌 目的**: 使用AI工具自动从设计稿/原型/截图中提取P01-P12提示词所需的输入材料
> **📌 适用**: Axure原型、Figma设计稿、PSD设计图、已上线页面截图

---

## 📋 工作流总览

```
┌─────────────────────────────────────────────────────────────────┐
│                    输入来源选择                                  │
├─────────────────────────────────────────────────────────────────┤
│  方案A                方案B                方案C                │
│  截图/设计图          Axure原型            已上线页面            │
│      ↓                   ↓                    ↓                 │
│  直接上传            发布到服务器         chrome-devtools       │
│      ↓                   ↓                    ↓                 │
│  ai-multimodal       chrome-devtools       自动截图+DOM         │
│  图像分析            截图+DOM提取          分析                  │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│                    P00-布局信息提取                              │
│  输入: 截图 + 设计图                                             │
│  输出: 格式化的布局描述、组件清单、颜色方案                        │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│                    P01-P12代码生成流水线                         │
│  P01布局骨架 → P02设计系统 → P03-P10图表组件 → P11-P12组装对接    │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🚀 方案A：截图/设计图直接分析（最简单）

### 适用场景
- Axure本地原型（需手动截图）
- Figma设计稿（导出PNG/JPG）
- PSD/Sketch设计文件（导出图片）
- 任何静态设计图

### 操作步骤

#### Step 1: 准备高清截图
```
推荐分辨率: 1920×1080 或更高
格式: PNG（保持清晰度）
覆盖范围: 完整大屏页面
```

#### Step 2: 使用P00提示词分析
1. 打开AI对话（Copilot Chat / Claude / DeepSeek）
2. 上传截图
3. 粘贴 `P00-布局信息提取提示词.md` 内容
4. 获取结构化的布局信息

#### Step 3: 将输出粘贴到P01-P12
- Part 1 → P01-布局骨架的输入材料
- Part 2 → P02-设计系统的输入材料
- Part 3 → P03-P10的组件清单
- Part 4 → P11组件组装的映射表

### 示例：使用Copilot Chat

```markdown
# 在Copilot Chat中

1. 点击 📎 上传截图（大屏设计图）

2. 输入提示词：
   @workspace #file:P00-布局信息提取提示词.md 
   分析这张大屏截图，提取布局信息

3. 获取输出后，复制Part 1到P01提示词：
   @workspace #file:P01-布局骨架生成提示词.md
   {粘贴Part 1内容}
```

---

## 🔧 方案B：Axure原型自动化提取

### 适用场景
- Axure原型已发布到HTTP服务器
- 需要批量提取多个页面
- 需要获取精确的DOM结构

### 前提条件
1. Axure原型发布到HTTP服务器（非file://协议）
2. chrome-devtools MCP已配置
3. ai-multimodal MCP已配置（可选，用于增强分析）

### 操作步骤

#### Step 1: 发布Axure到本地服务器

**方式1：使用Python简易服务器**
```bash
cd D:\工作\客户\南方电网\在运系统实时监控平台
python -m http.server 8080
# 访问地址: http://localhost:8080/start.html
```

**方式2：使用VS Code Live Server**
1. 安装Live Server扩展
2. 右键 start.html → Open with Live Server
3. 自动打开浏览器

**方式3：发布到Axure Cloud**
1. Axure RP → Publish → Publish to Axure Cloud
2. 获取分享链接

#### Step 2: 使用chrome-devtools截图

```markdown
# 在AI对话中使用MCP

请使用chrome-devtools：
1. 打开页面: http://localhost:8080/start.html?id=rshg2m&p=xx系统应用画像
2. 等待页面加载完成
3. 截取全屏截图
4. 获取页面DOM结构快照
```

#### Step 3: 自动分析

```markdown
# AI会自动执行以下操作

1. navigate_page → 打开目标URL
2. take_screenshot → 截取高清截图
3. take_snapshot → 获取DOM结构
4. 结合截图+DOM分析布局
5. 输出P01所需的输入材料
```

### 自动化脚本示例

```javascript
// 批量提取多页面布局信息
const pages = [
  { name: '系统应用画像', url: '?p=xx系统应用画像' },
  { name: '实时监控', url: '?p=实时监控' },
  { name: '告警中心', url: '?p=告警中心' }
];

for (const page of pages) {
  // 1. 打开页面
  await navigate(`http://localhost:8080/start.html${page.url}`);
  
  // 2. 等待加载
  await waitForSelector('.main-content');
  
  // 3. 截图
  await screenshot({ output: `./screenshots/${page.name}.png` });
  
  // 4. 获取DOM结构
  const snapshot = await takeSnapshot();
  
  // 5. 保存分析结果
  await saveAnalysis(page.name, snapshot);
}
```

---

## 🌐 方案C：已上线页面自动化

### 适用场景
- 参考竞品大屏页面
- 分析已上线的可视化系统
- 需要获取实时渲染效果

### 操作步骤

```markdown
# 在AI对话中

请使用chrome-devtools分析以下大屏页面：
URL: https://example.com/dashboard

执行以下操作：
1. 打开页面并等待加载完成
2. 截取全屏截图（fullPage: true）
3. 获取页面DOM结构快照
4. 使用P00提示词分析截图，提取布局信息
5. 输出Part 1-4的结构化信息
```

---

## 📊 三种方案对比

| 特性 | 方案A: 截图分析 | 方案B: Axure自动化 | 方案C: 在线页面 |
|------|----------------|-------------------|----------------|
| **操作复杂度** | ⭐ 最简单 | ⭐⭐⭐ 需配置服务器 | ⭐⭐ 中等 |
| **信息精度** | 视觉分析 | 视觉+DOM双重 | 视觉+DOM双重 |
| **颜色提取** | 估算 | 精确（CSS值） | 精确（CSS值） |
| **尺寸提取** | 估算 | 精确（px值） | 精确（px值） |
| **批量处理** | 手动 | 可自动化 | 可自动化 |
| **适用场景** | 快速分析 | 多页面原型 | 竞品分析 |

### 推荐选择

| 场景 | 推荐方案 |
|------|----------|
| 快速启动项目，只有设计图 | 方案A |
| Axure原型开发中，需要精确数据 | 方案B |
| 分析竞品大屏，学习布局技巧 | 方案C |
| 项目交付前验收，对比设计稿 | 方案A + 方案B |

---

## 🛠️ 工具配置指南

### ai-multimodal MCP配置

```json
// Cherry Studio / Claude Desktop 配置
{
  "mcpServers": {
    "ai-multimodal": {
      "command": "python",
      "args": [".claude/skills/ai-multimodal/server.py"],
      "env": {
        "GEMINI_API_KEY": "your-api-key"
      }
    }
  }
}
```

### chrome-devtools MCP配置

```json
{
  "mcpServers": {
    "chrome-devtools": {
      "command": "node",
      "args": [".claude/skills/chrome-devtools/scripts/server.js"]
    }
  }
}
```

### VS Code Copilot Chat配置

1. 确保安装GitHub Copilot Chat扩展
2. 图片上传：直接拖拽或点击📎图标
3. 文件引用：使用 `#file:文件名.md` 语法

---

## 📝 完整工作流示例

### 示例：从截图到代码生成

```markdown
# === 第一步：布局信息提取 ===

@workspace #file:P00-布局信息提取提示词.md

[上传大屏截图]

请分析这张大屏截图，提取布局信息。

# === AI输出 ===
# Part 1: 布局结构描述
# Part 2: 设计系统参数
# Part 3: 组件清单
# Part 4: 组件-区块映射表

# === 第二步：生成布局骨架 ===

@workspace #file:P01-布局骨架生成提示词.md

【输入材料1：布局结构描述】
{粘贴Part 1内容}

【输入材料2：技术栈要求】
- 框架：Vue 3 + Composition API
- 样式：SCSS + CSS Variables
- 构建：Vite
- 规范：TypeScript

# === AI输出 ===
# DashboardLayout.vue
# variables.scss
# dashboard.scss

# === 第三步：生成设计系统 ===

@workspace #file:P02-设计系统生成提示词.md

【输入材料：设计规范】
{粘贴Part 2内容}

# === 继续P03-P12... ===
```

---

## ❓ 常见问题

### Q1: Axure本地文件无法在chrome-devtools中打开？

**原因**: Chrome对file://协议有安全限制，需要安装Axure RP Extension。

**解决方案**:
1. 使用方案A（手动截图）
2. 或发布到HTTP服务器（方案B）

### Q2: 颜色提取不准确？

**原因**: 从截图分析颜色存在误差。

**解决方案**:
1. 使用方案B/C获取精确CSS值
2. 或在P02提示词中指定"根据设计规范调整颜色"

### Q3: 复杂组件识别错误？

**原因**: AI视觉分析对复杂图表可能识别有误。

**解决方案**:
1. 在P00输出中手动修正组件类型
2. 或分区域截图，逐个区块分析

### Q4: 如何处理多页面大屏？

**解决方案**:
1. 每个页面单独截图
2. 使用方案B的自动化脚本批量处理
3. 生成统一的设计系统（P02），各页面复用

---

## 📚 相关文件

- [P00-布局信息提取提示词.md](./P00-布局信息提取提示词.md) - 从截图提取布局信息
- [P01-布局骨架生成提示词.md](./P01-布局骨架生成提示词.md) - 生成Grid布局骨架
- [P02-设计系统生成提示词.md](./P02-设计系统生成提示词.md) - 生成Design Tokens
- [数据大屏AI代码生成指南.md](./数据大屏AI代码生成指南.md) - 完整开发指南
